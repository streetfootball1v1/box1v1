<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover"/>
<meta name="theme-color" content="#f0f0ee">
<title>BOX1V1 | –£–õ–ò–ß–ù–´–ô –§–£–¢–ë–û–õ 1 –ù–ê 1</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=IBM+Plex+Mono:wght@500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
/* ============================================
   CONFIG & VARIABLES (Concrete Theme 2026)
   ============================================ */
:root {
  /* Colors - Concrete & Asphalt */
  --bg: #f0f0ee;              /* Warm concrete wall */
  --bg-warm: #f7f5f3;         /* Under warm light */
  --surface: #ffffff;         /* Clean tile */
  --surface-shadow: rgba(0,0,0,0.08);
  --text: #1a1a1a;           /* Asphalt black, not pure #000 */
  --text-secondary: #666666;  /* Readable gray */
  --accent: #ccff00;         /* Fluorescent line (lime) */
  --accent-orange: #ff4d00;  /* Ball orange */
  --border: rgba(0,0,0,0.08);
  --shadow-color: rgba(0,0,0,0.15);
  
  /* Typography */
  --font-mono: 'IBM Plex Mono', monospace;
  --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  
  /* Motion */
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  
  /* Layout */
  --header-height: 80px;
  --max-width: 1400px;
  --radius: 4px;             /* Sharp corners - concrete tile */
  --radius-sm: 2px;
}

/* ============================================
   RESET & BASE
   ============================================ */
*, *::before, *::after { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
}

html {
  font-family: 'Inter', var(--font-system);
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
}

body {
  background: var(--bg);
  min-height: 100vh;
  line-height: 1.5;
  /* Subtle concrete texture */
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
}

/* Typography Utilities */
.font-tabular {
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
}

.text-sports {
  font-weight: 800;
  letter-spacing: -0.03em;
  line-height: 0.95;
  text-transform: uppercase;
}

/* ============================================
   PRELOADER
   ============================================ */
#preloader {
  position: fixed;
  inset: 0;
  background: var(--bg);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.6s var(--ease-out), visibility 0.6s;
}

#preloader.loaded {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.preloader-logo {
  font-size: clamp(3rem, 10vw, 5rem);
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.05em;
  color: var(--text);
  position: relative;
}

.preloader-logo::after {
  content: 'BOX1V1';
  position: absolute;
  left: 2px;
  top: 2px;
  color: var(--accent);
  opacity: 0.4;
  z-index: -1;
  filter: blur(2px);
}

/* ============================================
   SKELETON SCREENS
   ============================================ */
.skeleton {
  background: linear-gradient(90deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius);
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-card {
  height: 480px;
  border-radius: var(--radius);
  background: var(--surface);
  position: relative;
  overflow: hidden;
  border: 1px solid var(--border);
}

/* ============================================
   NAVIGATION
   ============================================ */
nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--header-height);
  background: rgba(240, 240, 238, 0.9);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
  z-index: 1000;
  transform: translateY(-100%);
  animation: slideDown 0.6s var(--ease-out) 0.3s forwards;
  transition: all var(--duration-normal);
}

nav.scrolled {
  box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  height: 70px;
}

@keyframes slideDown {
  to { transform: translateY(0); }
}

.nav-inner {
  max-width: var(--max-width);
  margin: 0 auto;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
}

.logo {
  font-size: 1.75rem;
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.03em;
  color: var(--text);
  position: relative;
  display: inline-block;
  transition: transform 0.2s;
  border: none;
  background: none;
  cursor: pointer;
  font-family: inherit;
}

.logo:hover {
  transform: scale(1.05);
  color: var(--text);
}

.logo-accent { 
  color: var(--accent-orange); 
  background: var(--accent);
  padding: 0 4px;
  border-radius: 2px;
  margin-left: 2px;
}

/* Desktop Navigation */
.nav-links {
  display: flex;
  gap: 8px;
  opacity: 0;
  animation: fadeIn 0.6s var(--ease-out) 0.5s forwards;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

.nav-links button {
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--text-secondary);
  padding: 12px 24px;
  border-radius: 100px;
  position: relative;
  overflow: hidden;
  transition: all var(--duration-normal) var(--ease-out);
  border: none;
  background: none;
  cursor: pointer;
  font-family: inherit;
}

.nav-links button::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 100%;
  background: var(--text);
  border-radius: 100px;
  transition: all var(--duration-normal) var(--ease-out);
  transform: translateX(-50%);
  z-index: -1;
}

.nav-links button:hover {
  color: var(--bg);
  transform: translateY(-2px);
}

.nav-links button:hover::before {
  width: 100%;
}

.nav-links button.active {
  color: var(--bg);
  background: var(--text);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* Mobile Burger */
.burger {
  display: none;
  cursor: pointer;
  width: 48px;
  height: 48px;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 6px;
  border-radius: var(--radius);
  background: var(--surface);
  border: 1px solid var(--border);
  transition: all var(--duration-normal);
  z-index: 1001;
}

.burger:hover {
  transform: scale(1.05);
  border-color: var(--accent-orange);
}

.burger span {
  width: 20px;
  height: 2px;
  background: var(--text);
  border-radius: 1px;
  transition: all var(--duration-normal);
}

.burger[aria-expanded="true"] span:nth-child(1) { 
  transform: translateY(8px) rotate(45deg); 
}
.burger[aria-expanded="true"] span:nth-child(2) { 
  opacity: 0; 
}
.burger[aria-expanded="true"] span:nth-child(3) { 
  transform: translateY(-8px) rotate(-45deg);
}

/* Mobile Drawer */
.drawer-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(5px);
  z-index: 1999;
  opacity: 0;
  visibility: hidden;
  transition: all var(--duration-slow);
}

.drawer-overlay.open {
  opacity: 1;
  visibility: visible;
}

.mobile-drawer {
  position: fixed;
  top: 0;
  right: -100%;
  width: min(86%, 400px);
  height: 100dvh;
  background: var(--surface);
  z-index: 2000;
  padding: 100px 32px 32px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  transition: right 0.5s var(--ease-out);
  box-shadow: -10px 0 30px rgba(0,0,0,0.1);
}

.mobile-drawer.open { right: 0; }

.mobile-drawer button {
  font-size: 2rem;
  font-weight: 900;
  font-style: italic;
  color: var(--text);
  text-transform: uppercase;
  letter-spacing: -0.02em;
  padding: 16px 0;
  border-bottom: 1px solid var(--border);
  transform: translateX(50px);
  opacity: 0;
  transition: all var(--duration-normal);
  border: none;
  background: none;
  text-align: left;
  cursor: pointer;
  font-family: inherit;
}

.mobile-drawer.open button {
  transform: translateX(0);
  opacity: 1;
}

.mobile-drawer.open button:nth-child(1) { transition-delay: 0.1s; }
.mobile-drawer.open button:nth-child(2) { transition-delay: 0.15s; }
.mobile-drawer.open button:nth-child(3) { transition-delay: 0.2s; }

.mobile-drawer button:hover {
  color: var(--accent-orange);
  padding-left: 10px;
}

/* ============================================
   MAIN LAYOUT
   ============================================ */
.main-content {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: calc(var(--header-height) + 40px) 24px 100px;
  min-height: 100vh;
}

section {
  display: none;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity var(--duration-slow) var(--ease-out), 
              transform var(--duration-slow) var(--ease-out);
}

section.active {
  display: block;
}

section.fade-in {
  opacity: 1;
  transform: translateY(0);
}

/* ============================================
   INTRO SECTION
   ============================================ */
.intro-block {
  padding: 60px 0 80px;
  text-align: center;
  max-width: 900px;
  margin: 0 auto;
}

.intro-block .tag {
  display: inline-block;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--text-secondary);
  margin-bottom: 24px;
  padding: 8px 16px;
  border: 1px solid var(--border);
  border-radius: 100px;
  background: var(--surface);
  box-shadow: 2px 2px 0 rgba(0,0,0,0.05);
}

.intro-block h1 {
  font-size: clamp(4rem, 15vw, 10rem);
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.05em;
  line-height: 0.9;
  margin-bottom: 24px;
  color: var(--text);
  position: relative;
  display: inline-block;
}

.intro-block h1::after {
  content: 'BOX1V1';
  position: absolute;
  left: 3px;
  top: 3px;
  color: var(--accent);
  opacity: 0.3;
  z-index: -1;
}

.intro-block p {
  font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  color: var(--text-secondary);
  max-width: 500px;
  margin: 0 auto 40px;
  font-weight: 500;
}

.btn-group {
  display: flex;
  gap: 16px;
  justify-content: center;
  flex-wrap: wrap;
}

/* ============================================
   BUTTONS (Hard shadows)
   ============================================ */
.btn {
  padding: 16px 32px;
  border-radius: 100px;
  font-weight: 700;
  text-transform: uppercase;
  font-size: 13px;
  letter-spacing: 0.05em;
  cursor: pointer;
  transition: all 0.1s;
  border: none;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  position: relative;
  font-family: inherit;
  top: 0;
  left: 0;
}

/* Hard offset shadows - concrete block effect */
.btn:active {
  top: 4px;
  left: 4px;
  box-shadow: 0 0 0 rgba(0,0,0,0) !important;
}

.btn-primary {
  background: var(--text);
  color: var(--bg);
  box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
}

.btn-primary:hover {
  box-shadow: 6px 6px 0 rgba(0,0,0,0.15);
  transform: translate(-2px, -2px);
}

.btn-outline {
  background: var(--surface);
  border: 2px solid var(--text);
  color: var(--text);
  box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
}

.btn-outline:hover {
  box-shadow: 6px 6px 0 rgba(0,0,0,0.08);
  transform: translate(-2px, -2px);
}

/* ============================================
   STATUS (No box, just text with pulse)
   ============================================ */
.hero-status {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  margin-top: 48px;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.02em;
  color: var(--text-secondary);
  font-family: var(--font-mono);
}

.status-pulse {
  width: 8px;
  height: 8px;
  background: var(--accent-orange);
  border-radius: 50%;
  position: relative;
  display: inline-block;
  box-shadow: 0 0 0 rgba(255, 77, 0, 0.4);
  animation: pulse-ring 2s infinite;
}

@keyframes pulse-ring {
  0% { box-shadow: 0 0 0 0 rgba(255, 77, 0, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(255, 77, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 77, 0, 0); }
}

.status-beta {
  background: var(--accent);
  color: var(--text);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.05em;
  margin-left: 4px;
  font-family: var(--font-system);
}

/* ============================================
   BENTO GRID (Hard shadows, sharp corners)
   ============================================ */
.bento-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  margin-top: 60px;
}

.bento-grid > * {
  opacity: 0;
  transform: translateY(30px);
  animation: staggerIn 0.6s var(--ease-out) forwards;
}

@keyframes staggerIn {
  to { opacity: 1; transform: translateY(0); }
}

.card {
  background: var(--surface);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  padding: 32px;
  position: relative;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 4px 4px 0 rgba(0,0,0,0.08);
  top: 0;
  left: 0;
}

.card:hover {
  top: -2px;
  left: -2px;
  box-shadow: 8px 8px 0 rgba(0,0,0,0.12);
  border-color: rgba(0,0,0,0.15);
}

.card:active {
  top: 4px;
  left: 4px;
  box-shadow: 0 0 0 rgba(0,0,0,0);
}

.card h2, .card h3 {
  font-weight: 900;
  font-style: italic;
  text-transform: uppercase;
  letter-spacing: -0.02em;
}

/* ============================================
   PLAYER CARDS (Concrete tiles)
   ============================================ */
.player-card {
  min-height: 400px;
  background: var(--surface);
  color: var(--text);
  padding: 0;
  position: relative;
  overflow: hidden;
  border-radius: var(--radius);
  box-shadow: 6px 6px 0 rgba(0,0,0,0.1);
}

.player-card:hover {
  transform: translateY(-4px);
  box-shadow: 10px 10px 0 rgba(0,0,0,0.08);
}

.player-img {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  filter: grayscale(0.2) contrast(1.1);
  transition: all 0.3s;
}

.player-card:hover .player-img {
  filter: grayscale(0) contrast(1);
  transform: scale(1.03);
}

.player-card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
  z-index: 1;
}

.player-info {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 32px;
  z-index: 2;
}

.player-role {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  color: var(--accent-orange);
  letter-spacing: 0.1em;
  display: block;
  margin-bottom: 4px;
  font-family: var(--font-mono);
}

.player-name {
  font-size: clamp(1.5rem, 4vw, 2rem);
  margin: 0;
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.02em;
  color: var(--text);
  line-height: 1;
}

.ovr-badge {
  position: absolute;
  top: 16px;
  right: 16px;
  background: var(--text);
  color: var(--bg);
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  font-weight: 900;
  font-size: 14px;
  z-index: 3;
  font-family: var(--font-mono);
  box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
  border: 1px solid rgba(0,0,0,0.1);
}

.player-status {
  position: absolute;
  top: 16px;
  left: 16px;
  background: var(--surface);
  color: var(--text);
  padding: 4px 12px;
  border-radius: var(--radius-sm);
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.05em;
  z-index: 3;
  text-transform: uppercase;
  border: 1px solid var(--border);
  box-shadow: 2px 2px 0 rgba(0,0,0,0.05);
}

.player-badges {
  display: flex;
  gap: 6px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.badge {
  background: var(--accent);
  color: var(--text);
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 9px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* ============================================
   TABLE (RATING)
   ============================================ */
.table-wrapper {
  background: var(--surface);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  overflow: hidden;
  box-shadow: 4px 4px 0 rgba(0,0,0,0.05);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-secondary);
  padding: 20px 24px;
  text-align: left;
  border-bottom: 2px solid var(--border);
  font-family: var(--font-mono);
}

td {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border);
  transition: all var(--duration-fast);
}

tbody tr {
  cursor: pointer;
  transition: all var(--duration-fast);
}

tbody tr:hover {
  background: rgba(0,0,0,0.02);
  transform: translateX(4px);
}

tbody tr:active {
  transform: translateX(2px) scale(0.99);
}

.player-cell {
  display: flex;
  align-items: center;
  gap: 16px;
}

.player-avatar-sm {
  width: 44px;
  height: 44px;
  border-radius: var(--radius);
  object-fit: cover;
  border: 1px solid var(--border);
  background: var(--bg);
}

.player-info-sm {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.player-name-sm {
  font-weight: 700;
  font-size: 15px;
  letter-spacing: -0.01em;
}

.player-role-sm {
  font-size: 11px;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-family: var(--font-mono);
}

.rank-cell {
  font-weight: 800;
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 14px;
}

.ovr-cell {
  text-align: right;
}

.ovr-value {
  display: inline-flex;
  background: var(--text);
  color: var(--bg);
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  font-weight: 900;
  font-size: 13px;
  font-family: var(--font-mono);
  border: 1px solid rgba(0,0,0,0.1);
}

.empty-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: 80px 20px;
  color: var(--text-secondary);
}

/* ============================================
   CONTROLS
   ============================================ */
.controls-row {
  margin-bottom: 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px;
}

.search-input {
  padding: 14px 24px;
  border-radius: 100px;
  border: 1px solid var(--border);
  background: var(--surface);
  width: 100%;
  max-width: 400px;
  font-size: 15px;
  font-weight: 500;
  transition: all var(--duration-fast);
  color: var(--text);
  font-family: inherit;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
}

.search-input:focus {
  outline: none;
  border-color: rgba(0,0,0,0.2);
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05), 0 4px 12px rgba(0,0,0,0.05);
}

.filter-bar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 10px 20px;
  border-radius: 100px;
  border: 1px solid var(--border);
  background: var(--surface);
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  cursor: pointer;
  transition: all var(--duration-fast);
  color: var(--text-secondary);
  font-family: inherit;
  box-shadow: 2px 2px 0 rgba(0,0,0,0.05);
}

.filter-btn:hover, .filter-btn.active {
  color: var(--text);
  border-color: var(--text);
  background: var(--bg);
  box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
  transform: translate(-1px, -1px);
}

.filter-btn:active {
  transform: translate(1px, 1px);
  box-shadow: 0 0 0 rgba(0,0,0,0);
}

/* ============================================
   MODALS (Concrete blocks)
   ============================================ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(240, 240, 238, 0.9);
  backdrop-filter: blur(10px);
  z-index: 3000;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all var(--duration-slow);
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

@media (max-width: 768px) {
  .modal-overlay {
    align-items: flex-end;
    padding: 0;
  }
  
  .modal-content {
    width: 100%;
    max-width: 100%;
    border-radius: 8px 8px 0 0;
    max-height: 90vh;
    transform: translateY(100%);
  }
  
  .modal-overlay.active .modal-content {
    transform: translateY(0);
  }
}

.modal-content {
  background: var(--surface);
  width: 100%;
  max-width: 520px;
  border-radius: var(--radius);
  padding: 40px;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 8px 8px 0 rgba(0,0,0,0.1), 0 20px 40px rgba(0,0,0,0.1);
  border: 1px solid var(--border);
  transform: translateY(20px);
  opacity: 0;
  transition: all 0.4s var(--ease-out);
}

.modal-overlay.active .modal-content {
  transform: translateY(0);
  opacity: 1;
}

.modal-header {
  position: sticky;
  top: -40px;
  background: var(--surface);
  padding: 20px 0;
  margin: -40px -40px 0 -40px;
  padding: 20px 40px;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  z-index: 10;
  border-bottom: 1px solid transparent;
}

.modal-header.scrolled {
  border-color: var(--border);
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.modal-close, .modal-action {
  width: 40px;
  height: 40px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text);
  transition: all var(--duration-fast);
  box-shadow: 2px 2px 0 rgba(0,0,0,0.05);
}

.modal-close:hover, .modal-action:hover {
  background: var(--text);
  color: var(--bg);
  transform: translate(-2px, -2px);
  box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
}

.modal-close:active, .modal-action:active {
  transform: translate(0, 0);
  box-shadow: 0 0 0 rgba(0,0,0,0);
}

.modal-image-container {
  width: 100%;
  aspect-ratio: 1;
  border-radius: var(--radius);
  overflow: hidden;
  margin: 40px 0 24px;
  background: var(--bg);
  border: 1px solid var(--border);
}

.modal-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.modal-title-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 32px;
  gap: 20px;
}

.modal-role {
  display: inline-block;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  color: var(--accent-orange);
  background: rgba(255, 77, 0, 0.1);
  padding: 4px 12px;
  border-radius: var(--radius-sm);
  margin-bottom: 8px;
  font-family: var(--font-mono);
  letter-spacing: 0.05em;
}

.modal-name {
  font-size: clamp(1.5rem, 5vw, 2rem);
  font-weight: 900;
  font-style: italic;
  line-height: 1;
  letter-spacing: -0.02em;
  margin: 0;
}

.modal-badges {
  display: flex;
  gap: 6px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.modal-badge {
  background: var(--accent);
  color: var(--text);
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.modal-ovr {
  font-size: clamp(2rem, 6vw, 3rem);
  font-weight: 900;
  color: var(--text);
  font-family: var(--font-mono);
  line-height: 1;
  padding: 8px 16px;
  background: var(--bg);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  box-shadow: 2px 2px 0 rgba(0,0,0,0.05);
}

.stats-grid {
  margin-bottom: 32px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.stat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
}

.stat-label {
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 700;
  font-family: var(--font-mono);
}

.stat-value {
  color: var(--text);
  font-weight: 800;
  font-family: var(--font-mono);
}

.stat-bar-bg {
  height: 8px;
  background: var(--bg);
  border-radius: 100px;
  overflow: hidden;
  border: 1px solid var(--border);
}

.stat-bar-fill {
  height: 100%;
  background: var(--text);
  border-radius: 100px;
  width: 0%;
  transition: width 1s var(--ease-out);
}

.modal-actions {
  display: flex;
  gap: 12px;
}

.modal-actions .btn {
  flex: 1;
}

/* ============================================
   TOAST NOTIFICATIONS
   ============================================ */
#toast-container {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10001;
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}

.toast {
  background: var(--text);
  color: var(--bg);
  padding: 14px 28px;
  border-radius: 100px;
  font-weight: 700;
  font-size: 13px;
  box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
  animation: toastSlide 0.4s var(--ease-out) forwards;
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: var(--font-mono);
  border: 1px solid rgba(0,0,0,0.1);
}

@keyframes toastSlide {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 1024px) {
  .bento-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
  :root { --header-height: 70px; }
  
  .nav-links { display: none; }
  .burger { display: flex; }
  
  .main-content { 
    padding: calc(var(--header-height) + 20px) 20px 60px; 
  }
  
  .bento-grid { 
    grid-template-columns: 1fr; 
    gap: 16px; 
  }
  
  .player-card { 
    min-height: 350px; 
  }
  
  .intro-block {
    padding: 40px 0 60px;
  }
  
  .controls-row {
    flex-direction: column;
    align-items: stretch;
  }
  
  .search-input { max-width: 100%; }
  
  .modal-content {
    padding: 24px;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
  }
  
  .modal-header {
    top: -24px;
    margin: -24px -24px 0 -24px;
    padding: 16px 24px;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus Visible */
:focus-visible {
  outline: 2px solid var(--accent-orange);
  outline-offset: 2px;
}

/* Scroll Lock */
body.scroll-locked {
  overflow: hidden;
  padding-right: var(--scrollbar-width, 0px);
}
</style>
</head>
<body>

<!-- Preloader -->
<div id="preloader" role="status" aria-label="–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è">
  <div class="preloader-logo">BOX<span style="color: var(--accent-orange); background: var(--accent); padding: 0 4px; border-radius: 2px;">1</span>V1</div>
</div>

<!-- Toast Container -->
<div id="toast-container" role="region" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"></div>

<!-- Navigation -->
<nav id="navbar" role="navigation" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
  <div class="nav-inner">
    <button class="logo" data-action="navigate" data-target="home" aria-label="–ù–∞ –≥–ª–∞–≤–Ω—É—é BOX1V1">
      BOX<span class="logo-accent">1</span>V1
    </button>
    
    <div class="nav-links" role="tablist">
      <button data-action="navigate" data-target="home" class="active" role="tab" aria-selected="true" aria-label="–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">–ì–ª–∞–≤–Ω–∞—è</button>
      <button data-action="navigate" data-target="roster" role="tab" aria-selected="false" aria-label="–°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
      <button data-action="navigate" data-target="stats" role="tab" aria-selected="false" aria-label="–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤">–†–µ–π—Ç–∏–Ω–≥</button>
    </div>
    
    <button class="burger" id="burger" data-action="toggle-menu" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" aria-expanded="false" aria-controls="mobile-drawer">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</nav>

<!-- Mobile Drawer -->
<div class="drawer-overlay" id="drawer-overlay" data-action="close-menu" aria-hidden="true"></div>
<div class="mobile-drawer" id="mobile-drawer" role="dialog" aria-label="–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é" aria-modal="true">
  <button class="logo" data-action="navigate" data-target="home" style="font-size: 2rem; margin-bottom: 20px;">
    BOX<span class="logo-accent">1</span>V1
  </button>
  <button data-action="navigate" data-target="home">–ì–ª–∞–≤–Ω–∞—è</button>
  <button data-action="navigate" data-target="roster">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
  <button data-action="navigate" data-target="stats">–†–µ–π—Ç–∏–Ω–≥</button>
  <div class="btn-group" style="margin-top: auto;">
    <button class="btn btn-primary" data-action="open-modal" data-modal="apply">–°—Ç–∞—Ç—å —á–∞—Å—Ç—å—é</button>
  </div>
</div>

<!-- Main Content -->
<main class="main-content">
  <!-- Home Section -->
  <section id="home" class="active" aria-label="–ì–ª–∞–≤–Ω–∞—è">
    <div class="intro-block">
      <span class="tag">The Next Gen Football</span>
      <h1>BOX1V1.</h1>
      <p>–†–µ—à–∞–µ—Ç –Ω–µ –∫–æ–º–∞–Ω–¥–∞.<br>–†–µ—à–∞–µ—à—å —Ç—ã.</p>
      <div class="btn-group">
        <button class="btn btn-primary magnetic" data-action="navigate" data-target="roster">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
        <button class="btn btn-outline magnetic" data-action="open-modal" data-modal="apply">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
      </div>
      
      <!-- –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –±–µ–∑ –∫–æ—Ä–æ–±–∫–∏ -->
      <div class="hero-status" aria-label="–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: –Ω–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç">
        <span class="status-pulse" aria-hidden="true"></span>
        <span>–ù–∞–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–∫—Ä—ã—Ç</span>
        <span class="status-beta">Beta</span>
        <span style="opacity: 0.5; margin-left: 8px;">/ –°–µ–∑–æ–Ω 2026</span>
      </div>
    </div>

    <div class="bento-grid">
      <article class="card" style="grid-column: span 2;" data-action="open-modal" data-modal="rules" tabindex="0" role="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–≥–ª–∞–º–µ–Ω—Ç">
        <span style="font-size:11px; font-weight:800; color:var(--accent-orange); text-transform:uppercase; letter-spacing:0.1em; font-family: var(--font-mono);">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</span>
        <h2 style="font-size: clamp(2rem, 5vw, 3.5rem); margin-top: 8px; letter-spacing: -0.03em;">–†–ï–ì–õ–ê–ú–ï–ù–¢</h2>
        <p style="margin-top: 8px; color: var(--text-secondary); font-size: 14px;">–°–≤–æ–¥ –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–∞—Ç—á–µ–π.</p>
        <div style="margin-top:auto; padding-top:24px; font-weight:800; font-size:11px; text-transform:uppercase; color:var(--text-secondary); font-family: var(--font-mono);">
          –ò–∑—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ ‚Üí
        </div>
      </article>
      
      <article class="card" data-action="external-link" data-href="https://t.me/streetbox1v1" tabindex="0" role="link" aria-label="–û—Ç–∫—Ä—ã—Ç—å Telegram –∫–∞–Ω–∞–ª">
        <h3 style="font-size: 1.25rem; font-weight: 900; font-style: italic; letter-spacing: -0.02em;">TELEGRAM</h3>
        <p style="margin-top: 8px; color: var(--text-secondary); font-size: 14px;">–°–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.</p>
      </article>
      
      <article class="card" data-action="external-link" data-href="https://instagram.com/box.1v1" tabindex="0" role="link" aria-label="–û—Ç–∫—Ä—ã—Ç—å Instagram">
        <h3 style="font-size: 1.25rem; font-weight: 900; font-style: italic; letter-spacing: -0.02em;">INSTAGRAM</h3>
        <p style="margin-top: 8px; color: var(--text-secondary); font-size: 14px;">–ì–ª–∞–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤ –º–µ–¥–∏–∞ —Ñ–æ—Ä–º–∞—Ç–µ.</p>
      </article>
    </div>
  </section>

  <!-- Roster Section -->
  <section id="roster" aria-label="–£—á–∞—Å—Ç–Ω–∏–∫–∏">
    <div style="margin-bottom: 40px;">
      <h1 class="text-sports" style="font-size: clamp(2.5rem, 10vw, 6rem);">
        –£–ß–ê–°–¢–ù–ò–ö–ò<span class="status-beta" style="font-size: 0.15em; vertical-align: super; margin-left: 8px; background: var(--text); color: var(--bg); padding: 2px 6px;">2026</span>
      </h1>
      <p style="font-size: 1.1rem; margin-top:12px; color: var(--text-secondary);">–î–µ–π—Å—Ç–≤—É—é—â–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ BOX1V1</p>
    </div>
    
    <div class="controls-row">
      <input 
        type="search" 
        class="search-input" 
        id="playerSearch" 
        placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏..." 
        autocomplete="off"
        aria-label="–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤"
      >
      <div class="filter-bar" role="group" aria-label="–§–∏–ª—å—Ç—Ä –ø–æ —Ä–æ–ª–∏">
        <button class="filter-btn active" data-filter="all" aria-pressed="true">–í—Å–µ</button>
        <button class="filter-btn" data-filter="player" aria-pressed="false">–ü–æ–ª–µ–≤—ã–µ</button>
        <button class="filter-btn" data-filter="goalkeeper" aria-pressed="false">–í—Ä–∞—Ç–∞—Ä–∏</button>
      </div>
    </div>
    
    <div class="bento-grid" id="roster-grid" role="list" aria-label="–°–µ—Ç–∫–∞ –∏–≥—Ä–æ–∫–æ–≤">
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
    </div>
  </section>

  <!-- Stats Section -->
  <section id="stats" aria-label="–†–µ–π—Ç–∏–Ω–≥">
    <h1 class="text-sports" style="font-size: clamp(2.5rem, 10vw, 6rem); margin-bottom: 32px;">
      –†–ï–ô–¢–ò–ù–ì<span style="font-size: 0.15em; vertical-align: super; margin-left: 8px; color: var(--text-secondary);">OVR</span>
    </h1>
    <div class="table-wrapper">
      <table role="table" aria-label="–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏–≥—Ä–æ–∫–æ–≤">
        <thead>
          <tr role="row">
            <th scope="col" role="columnheader">#</th>
            <th scope="col" role="columnheader">–ò–≥—Ä–æ–∫</th>
            <th scope="col" role="columnheader" style="text-align:right;">OVR</th>
          </tr>
        </thead>
        <tbody id="stats-body" role="rowgroup">
          <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
          <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
          <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
        </tbody>
      </table>
    </div>
  </section>
</main>

<!-- Player Modal -->
<div class="modal-overlay" id="player-modal" role="dialog" aria-modal="true" aria-label="–ö–∞—Ä—Ç–æ—á–∫–∞ –∏–≥—Ä–æ–∫–∞" aria-hidden="true">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <button class="modal-action" data-action="download-card" aria-label="–°–∫–∞—á–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –∏–≥—Ä–æ–∫–∞" title="–°–∫–∞—á–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
      </button>
      <button class="modal-close" data-action="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="modal-image-container">
      <img class="modal-image" id="modal-img" src="" alt="" loading="lazy">
    </div>
    
    <div class="modal-title-row">
      <div class="modal-info">
        <span class="modal-role" id="modal-role">ROLE</span>
        <h2 class="modal-name" id="modal-name">NAME</h2>
        <div class="modal-badges" id="modal-badges"></div>
      </div>
      <div class="modal-ovr font-tabular" id="modal-ovr">99</div>
    </div>
    
    <div class="stats-grid" id="modal-stats"></div>
    
    <div class="modal-actions">
      <button class="btn btn-primary" data-action="copy-id">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID</button>
      <button class="btn btn-outline" data-action="share-player">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
    </div>
  </div>
</div>

<!-- Apply Modal -->
<div class="modal-overlay" id="apply-modal" role="dialog" aria-modal="true" aria-label="–ó–∞—è–≤–∫–∞ –Ω–∞ —É—á–∞—Å—Ç–∏–µ" aria-hidden="true">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <button class="modal-close" data-action="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –∑–∞—è–≤–∫–∏">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <h2 style="font-size: clamp(1.5rem, 5vw, 2rem); font-weight: 900; font-style: italic; margin: 40px 0 16px 0; letter-spacing: -0.02em; text-transform: uppercase;">–í–°–¢–£–ü–ò–¢–¨ –í BOX1V1</h2>
    <p style="margin-bottom: 32px; color: var(--text-secondary); line-height: 1.6; font-size: 15px;">–ß—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É, –æ—Å—Ç–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥ –ª—é–±—ã–º –ø–æ—Å—Ç–æ–º —Å —Ö–µ—à—Ç–µ–≥–æ–º <strong style="color: var(--text); font-weight: 700;">#BOX–£–ß–ê–°–¢–í–û–í–ê–¢–¨</strong>.</p>
    <button class="btn btn-primary" style="width: 100%;" data-action="external-link" data-href="https://t.me/streetbox1v1">–û—Ç–∫—Ä—ã—Ç—å Telegram</button>
  </div>
</div>

<!-- Rules Modal -->
<div class="modal-overlay" id="rules-modal" role="dialog" aria-modal="true" aria-label="–†–µ–≥–ª–∞–º–µ–Ω—Ç —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π" aria-hidden="true">
  <div class="modal-content" role="document" style="max-width: 600px;">
    <div class="modal-header">
      <button class="modal-close" data-action="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å —Ä–µ–≥–ª–∞–º–µ–Ω—Ç">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <h2 style="font-size: clamp(1.5rem, 5vw, 2rem); font-weight: 900; font-style: italic; margin: 40px 0 32px 0; letter-spacing: -0.02em; text-transform: uppercase;">–†–ï–ì–õ–ê–ú–ï–ù–¢</h2>
    <div style="display: flex; flex-direction: column; gap: 24px;">
      <article style="padding-bottom: 24px; border-bottom: 1px solid var(--border);">
        <h3 style="font-size: 11px; font-weight: 800; text-transform: uppercase; color: var(--accent-orange); margin-bottom: 8px; letter-spacing: 0.1em; font-family: var(--font-mono);">01. –§–æ—Ä–º–∞—Ç</h3>
        <p style="color: var(--text-secondary); line-height: 1.6; margin: 0; font-size: 15px;">–ú–∞—Ç—á–∏ 1 –Ω–∞ 1 —Å —É—á–∞—Å—Ç–∏–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –≤—Ä–∞—Ç–∞—Ä—è.</p>
      </article>
      <article style="padding-bottom: 24px; border-bottom: 1px solid var(--border);">
        <h3 style="font-size: 11px; font-weight: 800; text-transform: uppercase; color: var(--accent-orange); margin-bottom: 8px; letter-spacing: 0.1em; font-family: var(--font-mono);">02. –¢–∞–π–º–∏–Ω–≥</h3>
        <p style="color: var(--text-secondary); line-height: 1.6; margin: 0; font-size: 15px;">–õ–∏–º–∏—Ç –Ω–∞ –∞—Ç–∞–∫—É ‚Äî 20 —Å–µ–∫—É–Ω–¥.</p>
      </article>
      <article>
        <h3 style="font-size: 11px; font-weight: 800; text-transform: uppercase; color: var(--accent-orange); margin-bottom: 8px; letter-spacing: 0.1em; font-family: var(--font-mono);">03. –†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
        <p style="color: var(--text-secondary); line-height: 1.6; margin: 0; font-size: 15px;">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã –¥–æ –¥–≤—É—Ö –≥–æ–ª–æ–≤, –±–µ–∑ –Ω–∏—á—å–∏.</p>
      </article>
    </div>
  </div>
</div>

<script>
/**
 * BOX1V1 Application
 * Architecture: Config ‚Üí Store ‚Üí Render ‚Üí UI ‚Üí App
 */

// ============================================
// CONFIGURATION
// ============================================
const CONFIG = {
  csvUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vREjbeB6jNrU01kw1npVtFTvqGdP134ERjmyROoOYeYXbzjgL0ZCNK6KwF0VTk3c1yxZEZEUsJjy2Ur/pub?output=csv',
  selectors: {
    preloader: '#preloader',
    rosterGrid: '#roster-grid',
    statsBody: '#stats-body',
    playerSearch: '#playerSearch',
    modalPlayer: '#player-modal',
    modalApply: '#apply-modal',
    modalRules: '#rules-modal',
    mobileDrawer: '#mobile-drawer',
    drawerOverlay: '#drawer-overlay',
    burger: '#burger',
    toastContainer: '#toast-container'
  },
  classes: {
    active: 'active',
    open: 'open',
    scrollLocked: 'scroll-locked',
    skeleton: 'skeleton',
    empty: 'empty-state'
  },
  debounceDelay: 300,
  animationStagger: 50
};

// ============================================
// MOCK DATA (Validated structure)
// ============================================
const playersData = [
  {
    id: 'player-1',
    name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä "–®—É—Å—Ç—Ä—ã–π" –ü–µ—Ç—Ä–æ–≤',
    ovr: 94,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 96, speed: 92, shot: 89, phys: 88 },
    photo: 'https://images.unsplash.com/photo-1517466787929-bc90951d0974?w=800&auto=format&fit=crop&q=80',
    status: '–ö–∞–ø–∏—Ç–∞–Ω',
    badges: ['MVP', '–°–Ω–∞–π–ø–µ—Ä']
  },
  {
    id: 'player-2',
    name: '–î–º–∏—Ç—Ä–∏–π –ö–æ–≤–∞–ª–µ–≤',
    ovr: 91,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 88, speed: 95, shot: 90, phys: 85 },
    photo: 'https://images.unsplash.com/photo-1579952363873-27f3bade9f55?w=800&auto=format&fit=crop&q=80',
    status: '',
    badges: ['–î–µ–±—é—Ç']
  },
  {
    id: 'player-3',
    name: '–ò–≤–∞–Ω "–°—Ç–µ–Ω–∞" –°–∏–¥–æ—Ä–æ–≤',
    ovr: 89,
    role: '–í—Ä–∞—Ç–∞—Ä—å',
    roleType: 'goalkeeper',
    stats: { ref: 94, div: 88, han: 92, pos: 90 },
    photo: 'https://images.unsplash.com/photo-1560272564-c830400ea0be?w=800&auto=format&fit=crop&q=80',
    status: '–õ–µ–≥–µ–Ω–¥–∞',
    badges: ['–í—Ä–∞—Ç–∞—Ä—å –≥–æ–¥–∞']
  },
  {
    id: 'player-4',
    name: '–ú–∞–∫—Å–∏–º –õ–µ–±–µ–¥–µ–≤',
    ovr: 87,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 85, speed: 88, shot: 86, phys: 90 },
    photo: 'https://images.unsplash.com/photo-1543353071-087f9a7ce535?w=800&auto=format&fit=crop&q=80',
    status: '',
    badges: []
  },
  {
    id: 'player-5',
    name: '–ê—Ä—Ç–µ–º –í–æ–ª–∫–æ–≤',
    ovr: 85,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 90, speed: 82, shot: 84, phys: 80 },
    photo: '',
    status: '–¢—Ä–∞–≤–º–∞',
    badges: []
  }
];

// ============================================
// STORE (Data Management with Validation)
// ============================================
const Store = {
  players: [],
  filter: 'all',
  searchQuery: '',
  currentPlayer: null,
  isLoading: true,

  validatePlayer(p) {
    // Basic validation to prevent undefined errors
    return {
      id: p.id || `player-${Math.random().toString(36).substr(2, 9)}`,
      name: p.name || '–ë–µ–∑ –∏–º–µ–Ω–∏',
      ovr: Number(p.ovr) || 0,
      role: p.role || '–ò–≥—Ä–æ–∫',
      roleType: p.roleType || 'player',
      stats: p.stats || {},
      photo: p.photo || '',
      status: p.status || '',
      badges: Array.isArray(p.badges) ? p.badges : [],
      displayStats: this.getDisplayStats(p.role, p.stats)
    };
  },

  getDisplayStats(role, stats) {
    if (role === '–í—Ä–∞—Ç–∞—Ä—å') {
      return [
        { key: 'REF', value: Number(stats?.ref) || 0, label: '–†–µ–∞–∫—Ü–∏—è' },
        { key: 'DIV', value: Number(stats?.div) || 0, label: '–ü—Ä—ã–∂–æ–∫' },
        { key: 'HAN', value: Number(stats?.han) || 0, label: '–†—É–∫–∏' },
        { key: 'POS', value: Number(stats?.pos) || 0, label: '–ü–æ–∑–∏—Ü–∏—è' }
      ];
    }
    return [
      { key: 'DRI', value: Number(stats?.drib) || 0, label: '–î—Ä–∏–±–ª–∏–Ω–≥' },
      { key: 'SPD', value: Number(stats?.speed) || 0, label: '–°–∫–æ—Ä–æ—Å—Ç—å' },
      { key: 'SHT', value: Number(stats?.shot) || 0, label: '–£–¥–∞—Ä' },
      { key: 'PHY', value: Number(stats?.phys) || 0, label: '–§–∏–∑–∏–∫–∞' }
    ];
  },

  async init() {
    try {
      // Simulate network
      await new Promise(resolve => setTimeout(resolve, 600));
      
      // Validate and map data
      this.players = playersData.map(p => this.validatePlayer(p));
      this.isLoading = false;
      return true;
    } catch (error) {
      console.error('Store initialization error:', error);
      this.isLoading = false;
      throw new Error('Failed to initialize data store');
    }
  },

  getFilteredPlayers() {
    return this.players.filter(p => {
      const matchesSearch = p.name.toLowerCase().includes(this.searchQuery.toLowerCase());
      const matchesFilter = this.filter === 'all' || p.roleType === this.filter;
      return matchesSearch && matchesFilter;
    });
  },

  getSortedPlayers() {
    return [...this.players].sort((a, b) => b.ovr - a.ovr);
  },

  getPlayerById(id) {
    return this.players.find(p => p.id === id);
  },

  setFilter(filter) {
    this.filter = filter;
  },

  setSearch(query) {
    this.searchQuery = query;
  }
};

// ============================================
// RENDER (View Generation)
// ============================================
const Render = {
  showSkeletons(container, type = 'card') {
    if (!container) return;
    if (type === 'card') {
      container.innerHTML = Array(4).fill(0).map((_, i) => `
        <div class="skeleton-card" role="listitem" style="animation-delay: ${i * 0.1}s">
          <div class="skeleton" style="height:100%"></div>
        </div>
      `).join('');
    } else if (type === 'table') {
      container.innerHTML = Array(5).fill(0).map(() => `
        <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
      `).join('');
    }
  },

  showError(container, message) {
    if (!container) return;
    container.innerHTML = `
      <div class="empty-state" role="alert" aria-live="polite">
        <div class="empty-state-icon" style="font-size: 32px;">‚ö†Ô∏è</div>
        <div class="empty-state-title" style="color: var(--text); font-weight: 700; margin-bottom: 8px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>
        <p>${message}</p>
      </div>
    `;
  },

  roster(players, container) {
    if (!container) return;
    
    if (players.length === 0) {
      container.innerHTML = `
        <div class="empty-state" role="status">
          <div class="empty-state-icon" style="font-size: 32px;">üîç</div>
          <div class="empty-state-title" style="color: var(--text); font-weight: 700; margin-bottom: 8px;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>
          <p>–ü–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        </div>
      `;
      return;
    }

    container.innerHTML = players.map((p, index) => `
      <article 
        class="card player-card" 
        role="listitem" 
        tabindex="0"
        data-player-id="${p.id}"
        style="animation-delay: ${index * CONFIG.animationStagger}ms; animation: staggerIn 0.5s ease-out ${index * 0.05}s backwards;"
        aria-label="–ö–∞—Ä—Ç–æ—á–∫–∞ –∏–≥—Ä–æ–∫–∞ ${p.name}, —Ä–µ–π—Ç–∏–Ω–≥ ${p.ovr}"
      >
        ${p.status ? `<div class="player-status">${p.status}</div>` : ''}
        <div class="player-img" style="background-image: url('${p.photo || ''}')" aria-label="–§–æ—Ç–æ ${p.name}"></div>
        <div class="player-info">
          <span class="player-role">${p.role}</span>
          <h3 class="player-name">${p.name}</h3>
          ${p.badges.length ? `
            <div class="player-badges">
              ${p.badges.map(b => `<span class="badge">${b}</span>`).join('')}
            </div>
          ` : ''}
        </div>
        <span class="ovr-badge font-tabular">${p.ovr}</span>
      </article>
    `).join('');
  },

  stats(players, container) {
    if (!container) return;
    
    container.innerHTML = players.map((p, index) => `
      <tr data-player-id="${p.id}" tabindex="0" role="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É ${p.name}, —Ä–µ–π—Ç–∏–Ω–≥ ${p.ovr}">
        <td class="rank-cell font-tabular">${(index + 1).toString().padStart(2, '0')}</td>
        <td>
          <div class="player-cell">
            <img 
              class="player-avatar-sm" 
              src="${p.photo || ''}" 
              alt="" 
              loading="lazy"
              onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
            >
            <div style="width:44px;height:44px;border-radius:4px;background:var(--bg);display:none;align-items:center;justify-content:center;color:var(--text);font-weight:900;font-size:16px;border:1px solid var(--border);">
              ${p.name.charAt(0)}
            </div>
            <div class="player-info-sm">
              <div class="player-name-sm">${p.name}</div>
              <div class="player-role-sm">${p.role}</div>
            </div>
          </div>
        </td>
        <td class="ovr-cell">
          <span class="ovr-value font-tabular">${p.ovr}</span>
        </td>
      </tr>
    `).join('');
  },

  playerModal(player) {
    Store.currentPlayer = player;
    
    const nameEl = document.getElementById('modal-name');
    const roleEl = document.getElementById('modal-role');
    const ovrEl = document.getElementById('modal-ovr');
    const img = document.getElementById('modal-img');
    const badgesContainer = document.getElementById('modal-badges');
    const statsContainer = document.getElementById('modal-stats');
    
    if (nameEl) nameEl.textContent = player.name;
    if (roleEl) roleEl.textContent = player.role;
    if (ovrEl) ovrEl.textContent = player.ovr;
    
    if (img) {
      img.src = player.photo || '';
      img.alt = player.photo ? `–§–æ—Ç–æ –∏–≥—Ä–æ–∫–∞ ${player.name}` : '';
      img.onerror = () => { img.style.display = 'none'; };
      img.onload = () => { img.style.display = 'block'; };
    }
    
    if (badgesContainer) {
      badgesContainer.innerHTML = player.badges.length 
        ? player.badges.map(b => `<span class="modal-badge">${b}</span>`).join('')
        : '';
    }
    
    if (statsContainer) {
      statsContainer.innerHTML = player.displayStats.map((stat, i) => `
        <div class="stat-item">
          <div class="stat-header">
            <span class="stat-label">${stat.key} <span style="opacity:0.6; font-weight:500;">(${stat.label})</span></span>
            <span class="stat-value font-tabular">${stat.value}</span>
          </div>
          <div class="stat-bar-bg">
            <div class="stat-bar-fill" data-width="${Math.min(stat.value, 100)}" style="width: 0%" data-index="${i}"></div>
          </div>
        </div>
      `).join('');
    }

    // Animate bars with requestAnimationFrame for performance
    requestAnimationFrame(() => {
      setTimeout(() => {
        document.querySelectorAll('.stat-bar-fill').forEach((bar, i) => {
          setTimeout(() => {
            bar.style.width = bar.dataset.width + '%';
          }, i * 100);
        });
      }, 100);
    });
  }
};

// ============================================
// UI (Interaction Layer)
// ============================================
const UI = {
  scrollBarWidth: 0,
  lastFocusedElement: null,

  init() {
    this.calculateScrollBarWidth();
    this.setupEventListeners();
    this.setupIntersectionObserver();
    this.setupModalScrollHeaders();
  },

  calculateScrollBarWidth() {
    const div = document.createElement('div');
    div.style.cssText = 'width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;';
    document.body.appendChild(div);
    this.scrollBarWidth = div.offsetWidth - div.clientWidth;
    document.body.removeChild(div);
    document.documentElement.style.setProperty('--scrollbar-width', `${this.scrollBarWidth}px`);
  },

  setupEventListeners() {
    // Event Delegation
    document.addEventListener('click', (e) => {
      const actionEl = e.target.closest('[data-action]');
      if (!actionEl) return;

      const action = actionEl.dataset.action;
      const target = actionEl.dataset.target;
      const modal = actionEl.dataset.modal;
      const href = actionEl.dataset.href;
      const playerId = actionEl.closest('[data-player-id]')?.dataset.playerId;

      switch(action) {
        case 'navigate':
          this.switchTab(target);
          break;
        case 'toggle-menu':
          this.toggleMenu();
          break;
        case 'close-menu':
          this.closeMenu();
          break;
        case 'open-modal':
          if (modal) this.openModal(modal);
          break;
        case 'close-modal':
          this.closeModal();
          break;
        case 'external-link':
          if (href) window.open(href, '_blank', 'noopener,noreferrer');
          break;
        case 'download-card':
          this.downloadCard();
          break;
        case 'copy-id':
          this.copyPlayerId();
          break;
        case 'share-player':
          this.sharePlayer();
          break;
      }

      if (playerId) {
        const player = Store.getPlayerById(playerId);
        if (player) {
          Render.playerModal(player);
          this.openModal('player');
        }
      }
    });

    // Filter buttons
    document.querySelectorAll('[data-filter]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        document.querySelectorAll('[data-filter]').forEach(b => {
          b.classList.remove('active');
          b.setAttribute('aria-pressed', 'false');
        });
        e.target.classList.add('active');
        e.target.setAttribute('aria-pressed', 'true');
        
        Store.setFilter(e.target.dataset.filter);
        Render.roster(Store.getFilteredPlayers(), document.querySelector(CONFIG.selectors.rosterGrid));
      });
    });

    // Search with debounce
    const searchInput = document.querySelector(CONFIG.selectors.playerSearch);
    let debounceTimer;
    searchInput?.addEventListener('input', (e) => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(() => {
        Store.setSearch(e.target.value);
        Render.roster(Store.getFilteredPlayers(), document.querySelector(CONFIG.selectors.rosterGrid));
      }, CONFIG.debounceDelay);
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (document.querySelector(CONFIG.selectors.mobileDrawer).classList.contains('open')) {
          this.closeMenu();
        } else {
          this.closeModal();
        }
      }
    });

    // Navbar scroll
    window.addEventListener('scroll', () => {
      const nav = document.getElementById('navbar');
      if (nav) nav.classList.toggle('scrolled', window.scrollY > 50);
    }, { passive: true });

    this.setupMagneticButtons();
  },

  setupMagneticButtons() {
    const isTouchDevice = window.matchMedia('(pointer: coarse)').matches;
    if (isTouchDevice) return;

    document.querySelectorAll('.magnetic').forEach(btn => {
      btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        btn.style.transform = `translate(${x * 0.15}px, ${y * 0.15}px)`;
      });
      
      btn.addEventListener('mouseleave', () => {
        btn.style.transform = 'translate(0, 0)';
      });
    });
  },

  setupIntersectionObserver() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
  },

  setupModalScrollHeaders() {
    document.querySelectorAll('.modal-content').forEach(modal => {
      modal.addEventListener('scroll', () => {
        const header = modal.querySelector('.modal-header');
        if (header) {
          header.classList.toggle('scrolled', modal.scrollTop > 10);
        }
      });
    });
  },

  switchTab(tabId) {
    // Update nav buttons
    document.querySelectorAll('.nav-links [data-action="navigate"]').forEach(btn => {
      const isActive = btn.dataset.target === tabId;
      btn.classList.toggle('active', isActive);
      btn.setAttribute('aria-selected', isActive.toString());
    });

    // Update sections
    document.querySelectorAll('main > section').forEach(section => {
      const isActive = section.id === tabId;
      section.classList.toggle('active', isActive);
      
      if (isActive) {
        section.classList.add('fade-in');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        section.classList.remove('fade-in');
      }
    });

    this.closeMenu();
    this.updateURL(tabId);
  },

  updateURL(tabId) {
    // Update URL without reload for better UX
    const url = new URL(window.location);
    url.hash = tabId;
    window.history.pushState({tab: tabId}, '', url);
  },

  toggleMenu() {
    const drawer = document.querySelector(CONFIG.selectors.mobileDrawer);
    const overlay = document.querySelector(CONFIG.selectors.drawerOverlay);
    const burger = document.querySelector(CONFIG.selectors.burger);
    const isOpen = drawer?.classList.contains('open');

    if (isOpen) {
      this.closeMenu();
    } else {
      drawer?.classList.add('open');
      overlay?.classList.add('open');
      burger?.classList.add('open');
      burger?.setAttribute('aria-expanded', 'true');
      this.lockScroll();
    }
  },

  closeMenu() {
    const drawer = document.querySelector(CONFIG.selectors.mobileDrawer);
    const overlay = document.querySelector(CONFIG.selectors.drawerOverlay);
    const burger = document.querySelector(CONFIG.selectors.burger);

    drawer?.classList.remove('open');
    overlay?.classList.remove('open');
    burger?.classList.remove('open');
    burger?.setAttribute('aria-expanded', 'false');
    this.unlockScroll();
  },

  openModal(type) {
    const modalMap = {
      'player': CONFIG.selectors.modalPlayer,
      'apply': CONFIG.selectors.modalApply,
      'rules': CONFIG.selectors.modalRules
    };

    const modalId = modalMap[type];
    if (!modalId) return;

    const modal = document.querySelector(modalId);
    if (!modal) return;

    this.lastFocusedElement = document.activeElement;
    modal.classList.add('active');
    modal.setAttribute('aria-hidden', 'false');
    
    // Focus trap
    setTimeout(() => {
      const closeBtn = modal.querySelector('[data-action="close-modal"]');
      closeBtn?.focus();
    }, 100);

    this.lockScroll();
  },

  closeModal() {
    document.querySelectorAll('.modal-overlay').forEach(modal => {
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');
    });
    
    this.unlockScroll();
    
    if (this.lastFocusedElement) {
      this.lastFocusedElement.focus();
      this.lastFocusedElement = null;
    }
  },

  lockScroll() {
    document.body.classList.add(CONFIG.classes.scrollLocked);
  },

  unlockScroll() {
    document.body.classList.remove(CONFIG.classes.scrollLocked);
  },

  async downloadCard() {
    const btn = document.querySelector('[data-action="download-card"]');
    if (!btn) return;

    try {
      btn.style.opacity = '0.5';
      btn.disabled = true;
      this.showToast('‚è≥ –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç–æ—á–∫—É...');

      const modalContent = document.querySelector('#player-modal .modal-content');
      if (!modalContent) throw new Error('Modal content not found');
      
      await new Promise(resolve => requestAnimationFrame(resolve));
      
      const canvas = await html2canvas(modalContent, {
        scale: 2,
        useCORS: true,
        allowTaint: false,
        backgroundColor: '#ffffff',
        logging: false
      });

      const name = Store.currentPlayer?.name?.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9]/g, '_') || 'player';
      const link = document.createElement('a');
      link.download = `BOX1V1_${name}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
      
      this.showToast('‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
    } catch (error) {
      console.error('Download error:', error);
      this.showToast('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
    } finally {
      btn.style.opacity = '';
      btn.disabled = false;
    }
  },

  async copyPlayerId() {
    try {
      const name = Store.currentPlayer?.name;
      if (!name) return;
      
      await navigator.clipboard.writeText(name);
      this.showToast('üìã ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω');
    } catch (err) {
      this.showToast('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å');
    }
  },

  async sharePlayer() {
    const url = window.location.href;
    const player = Store.currentPlayer;
    
    if (navigator.share) {
      try {
        await navigator.share({
          title: `BOX1V1 - ${player?.name || '–ò–≥—Ä–æ–∫'}`,
          text: `–û—Ü–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞ ${player?.name} —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º ${player?.ovr} –≤ BOX1V1!`,
          url: url
        });
      } catch (err) {
        // User cancelled
      }
    } else {
      try {
        await navigator.clipboard.writeText(url);
        this.showToast('üîó –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞');
      } catch (err) {
        this.showToast('‚ùå –û—à–∏–±–∫–∞');
      }
    }
  },

  showToast(message, duration = 3000) {
    const container = document.querySelector(CONFIG.selectors.toastContainer);
    if (!container) return;
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.innerHTML = `<span>${message}</span>`;
    
    container.appendChild(toast);
    
    // Use CSS transition for removal
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transform = 'translate(-50%, 20px)';
      setTimeout(() => toast.remove(), 300);
    }, duration);
  }
};

// ============================================
// APPLICATION INITIALIZATION
// ============================================
const App = {
  async init() {
    try {
      // Show skeletons
      Render.showSkeletons(document.querySelector(CONFIG.selectors.rosterGrid), 'card');
      Render.showSkeletons(document.querySelector(CONFIG.selectors.statsBody), 'table');

      UI.init();

      // Handle URL hash for deep linking
      const hash = window.location.hash.slice(1);
      if (hash && ['home', 'roster', 'stats'].includes(hash)) {
        UI.switchTab(hash);
      }

      await Store.init();

      // Check if data loaded successfully
      if (Store.players.length === 0) {
        throw new Error('No players data available');
      }

      Render.roster(Store.getFilteredPlayers(), document.querySelector(CONFIG.selectors.rosterGrid));
      Render.stats(Store.getSortedPlayers(), document.querySelector(CONFIG.selectors.statsBody));

      // Hide preloader with CSS transition
      const preloader = document.querySelector(CONFIG.selectors.preloader);
      if (preloader) {
        // Wait for fonts and initial render
        await document.fonts.ready;
        preloader.classList.add('loaded');
        // Remove from DOM after transition
        setTimeout(() => preloader.remove(), 800);
      }

    } catch (error) {
      console.error('App initialization error:', error);
      UI.showToast('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
      
      // Show error state in grids
      const rosterGrid = document.querySelector(CONFIG.selectors.rosterGrid);
      const statsBody = document.querySelector(CONFIG.selectors.statsBody);
      
      Render.showError(rosterGrid, '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤');
      if (statsBody) statsBody.innerHTML = '<tr><td colspan="3" style="text-align:center;padding:40px;color:var(--text-secondary);">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</td></tr>';
      
      const preloader = document.querySelector(CONFIG.selectors.preloader);
      if (preloader) preloader.classList.add('loaded');
    }
  }
};

// Handle browser back/forward buttons
window.addEventListener('popstate', (e) => {
  const tab = e.state?.tab || window.location.hash.slice(1) || 'home';
  if (['home', 'roster', 'stats'].includes(tab)) {
    UI.switchTab(tab);
  }
});

// Start application
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => App.init());
} else {
  App.init();
}
</script>
</body>
</html>

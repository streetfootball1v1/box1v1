<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover"/>
<meta name="theme-color" content="#0a0a0a">
<title>BOX1V1 | –£–õ–ò–ß–ù–´–ô –§–£–¢–ë–û–õ 1 –ù–ê 1</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
/* ============================================
   CONFIG & VARIABLES
   ============================================ */
:root {
  /* Colors */
  --bg: #0a0a0a;
  --bg-elevated: #141414;
  --bg-skeleton: #1a1a1a;
  --text: #fafafa;
  --text-secondary: #a1a1aa;
  --accent: #22c55e;
  --accent-glow: rgba(34, 197, 94, 0.4);
  --border: rgba(255,255,255,0.06);
  --error: #ef4444;
  
  /* Typography Scale */
  --font-mono: 'SF Mono', Monaco, monospace;
  --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  
  /* Motion */
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  
  /* Layout */
  --header-height: 80px;
  --max-width: 1400px;
  --radius: 24px;
  --radius-sm: 12px;
}

/* ============================================
   RESET & BASE
   ============================================ */
*, *::before, *::after { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
}

html {
  font-family: 'Inter', var(--font-system);
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--bg);
  color: var(--text);
  /* Prevent scroll jump when locking body */
  overflow-y: scroll;
}

body {
  background: var(--bg);
  min-height: 100vh;
  line-height: 1.5;
}

/* Typography Utilities */
.font-tabular {
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
}

.text-sports {
  font-weight: 800;
  letter-spacing: -0.02em;
  line-height: 1.1;
}

/* ============================================
   ANIMATED BACKGROUND
   ============================================ */
body::before {
  content: '';
  position: fixed;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: 
    radial-gradient(circle at 20% 50%, rgba(34,197,94,0.08) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(34,197,94,0.05) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(255,255,255,0.02) 0%, transparent 40%);
  animation: meshMove 20s ease-in-out infinite;
  pointer-events: none;
  z-index: -1;
}

@keyframes meshMove {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(2%, 2%) scale(1.1); }
  66% { transform: translate(-2%, 1%) scale(0.95); }
}

/* ============================================
   PRELOADER
   ============================================ */
#preloader {
  position: fixed;
  inset: 0;
  background: var(--bg);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.8s var(--ease-out), visibility 0.8s;
}

#preloader.loaded {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.preloader-logo {
  font-size: clamp(3rem, 10vw, 5rem);
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.05em;
  background: linear-gradient(135deg, var(--text) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: logoReveal 1.2s var(--ease-out) forwards;
  clip-path: inset(0 100% 0 0);
}

@keyframes logoReveal {
  to { clip-path: inset(0 0 0 0); }
}

/* ============================================
   SKELETON SCREENS
   ============================================ */
.skeleton {
  background: linear-gradient(90deg, var(--bg-skeleton) 25%, #2a2a2a 50%, var(--bg-skeleton) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius-sm);
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-card {
  height: 480px;
  border-radius: var(--radius);
  background: var(--bg-elevated);
  position: relative;
  overflow: hidden;
}

.skeleton-card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.03), transparent);
  transform: translateX(-100%);
  animation: shimmer 2s infinite;
}

.skeleton-text {
  height: 1em;
  margin-bottom: 0.5em;
}

.skeleton-text.short { width: 40%; }
.skeleton-text.medium { width: 70%; }

/* ============================================
   NAVIGATION
   ============================================ */
nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--header-height);
  background: rgba(10, 10, 10, 0.8);
  backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid var(--border);
  z-index: 1000;
  transform: translateY(-100%);
  animation: slideDown 0.8s var(--ease-out) 0.5s forwards;
  transition: all var(--duration-normal);
}

nav.scrolled {
  box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
  height: 70px;
  background: rgba(10, 10, 10, 0.95);
}

@keyframes slideDown {
  to { transform: translateY(0); }
}

.nav-inner {
  max-width: var(--max-width);
  margin: 0 auto;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
}

.logo {
  font-size: 1.75rem;
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.03em;
  text-decoration: none;
  color: var(--text);
  position: relative;
  display: inline-block;
  transition: transform 0.3s var(--ease-spring);
  border: none;
  background: none;
  cursor: pointer;
}

.logo:hover {
  transform: scale(1.05);
  animation: glitch 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
  color: var(--accent);
}

.logo-accent { color: var(--accent); }

@keyframes glitch {
  0% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); }
  40% { transform: translate(-2px, -2px); }
  60% { transform: translate(2px, 2px); }
  80% { transform: translate(2px, -2px); }
  100% { transform: translate(0); }
}

/* Desktop Navigation */
.nav-links {
  display: flex;
  gap: 8px;
  opacity: 0;
  animation: fadeIn 0.6s var(--ease-out) 0.8s forwards;
}

.nav-links a {
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  text-decoration: none;
  color: var(--text-secondary);
  padding: 12px 24px;
  border-radius: 100px;
  position: relative;
  overflow: hidden;
  transition: all var(--duration-normal) var(--ease-out);
  border: none;
  background: none;
  cursor: pointer;
}

.nav-links a::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 100%;
  background: var(--text);
  border-radius: 100px;
  transition: all var(--duration-normal) var(--ease-out);
  transform: translateX(-50%);
  z-index: -1;
}

.nav-links a:hover {
  color: var(--bg);
  transform: translateY(-2px);
}

.nav-links a:hover::before {
  width: 100%;
}

.nav-links a.active {
  color: var(--bg);
  background: var(--text);
  box-shadow: 0 4px 20px rgba(255,255,255,0.2);
}

/* Mobile Burger */
.burger {
  display: none;
  cursor: pointer;
  width: 48px;
  height: 48px;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 6px;
  border-radius: 16px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  transition: all var(--duration-normal) var(--ease-spring);
  z-index: 1001;
}

.burger:hover {
  transform: scale(1.1);
  border-color: var(--accent);
}

.burger span {
  width: 20px;
  height: 2px;
  background: var(--text);
  border-radius: 2px;
  transition: all var(--duration-normal) var(--ease-spring);
  transform-origin: center;
}

.burger[aria-expanded="true"] span:nth-child(1) { 
  transform: translateY(8px) rotate(45deg); 
  background: var(--accent);
}
.burger[aria-expanded="true"] span:nth-child(2) { 
  opacity: 0; 
  transform: scaleX(0);
}
.burger[aria-expanded="true"] span:nth-child(3) { 
  transform: translateY(-8px) rotate(-45deg);
  background: var(--accent);
}

/* Mobile Drawer */
.drawer-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(10px);
  z-index: 1999;
  opacity: 0;
  visibility: hidden;
  transition: all var(--duration-slow) var(--ease-out);
}

.drawer-overlay.open {
  opacity: 1;
  visibility: visible;
}

.mobile-drawer {
  position: fixed;
  top: 0;
  right: -100%;
  width: min(86%, 400px);
  height: 100dvh;
  background: var(--bg-elevated);
  z-index: 2000;
  padding: 100px 32px 32px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  transition: right 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: -20px 0 60px rgba(0,0,0,0.5);
}

.mobile-drawer.open { right: 0; }

.mobile-drawer a {
  font-size: 2rem;
  font-weight: 900;
  font-style: italic;
  text-decoration: none;
  color: var(--text);
  text-transform: uppercase;
  letter-spacing: -0.02em;
  padding: 16px 0;
  border-bottom: 1px solid var(--border);
  transform: translateX(50px);
  opacity: 0;
  transition: all var(--duration-normal) var(--ease-out);
  border: none;
  background: none;
  text-align: left;
  cursor: pointer;
}

.mobile-drawer.open a {
  transform: translateX(0);
  opacity: 1;
}

.mobile-drawer.open a:nth-child(1) { transition-delay: 0.1s; }
.mobile-drawer.open a:nth-child(2) { transition-delay: 0.2s; }
.mobile-drawer.open a:nth-child(3) { transition-delay: 0.3s; }

.mobile-drawer a:hover {
  color: var(--accent);
  padding-left: 20px;
}

/* ============================================
   MAIN LAYOUT
   ============================================ */
.main-content {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: calc(var(--header-height) + 40px) 24px 100px;
  min-height: 100vh;
}

section {
  display: none;
  opacity: 0;
  transform: translateY(40px);
  transition: opacity var(--duration-slow) var(--ease-out), 
              transform var(--duration-slow) var(--ease-out);
}

section.active {
  display: block;
}

section.fade-in {
  opacity: 1;
  transform: translateY(0);
}

/* ============================================
   INTRO SECTION
   ============================================ */
.intro-block {
  padding: 60px 0 100px;
  text-align: center;
  max-width: 900px;
  margin: 0 auto;
  perspective: 1000px;
}

.intro-block .tag {
  display: inline-block;
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--accent);
  margin-bottom: 24px;
  padding: 12px 24px;
  border: 2px solid var(--accent);
  border-radius: 100px;
  position: relative;
  overflow: hidden;
  animation: borderGlow 3s ease-in-out infinite;
}

@keyframes borderGlow {
  0%, 100% { box-shadow: 0 0 0 0 rgba(34,197,94,0.4); }
  50% { box-shadow: 0 0 20px 5px rgba(34,197,94,0.2); }
}

.intro-block h1 {
  font-size: clamp(4rem, 15vw, 10rem);
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.05em;
  line-height: 0.9;
  margin-bottom: 24px;
  background: linear-gradient(135deg, var(--text) 0%, #666 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: titleReveal 1s var(--ease-out) 0.3s backwards;
  transform-style: preserve-3d;
}

@keyframes titleReveal {
  from {
    opacity: 0;
    transform: translateY(100px) rotateX(-45deg);
    filter: blur(20px);
  }
}

.intro-block p {
  font-size: clamp(1.25rem, 2.5vw, 1.75rem);
  color: var(--text-secondary);
  max-width: 500px;
  margin: 0 auto 40px;
  animation: fadeInUp 0.8s var(--ease-out) 0.5s backwards;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
}

.btn-group {
  display: flex;
  gap: 16px;
  justify-content: center;
  flex-wrap: wrap;
  animation: fadeInUp 0.8s var(--ease-out) 0.7s backwards;
}

/* ============================================
   BUTTONS
   ============================================ */
.btn {
  padding: 20px 36px;
  border-radius: 100px;
  font-weight: 700;
  text-transform: uppercase;
  font-size: 13px;
  letter-spacing: 0.05em;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-spring);
  border: none;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  position: relative;
  overflow: hidden;
  isolation: isolate;
  font-family: inherit;
}

.btn:active {
  transform: scale(0.96);
}

.btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(255,255,255,0.3) 0%, transparent 60%);
  opacity: 0;
  transition: opacity var(--duration-normal);
  z-index: -1;
}

.btn:hover::before {
  opacity: 1;
}

.btn-primary {
  background: var(--text);
  color: var(--bg);
  box-shadow: 0 10px 30px -10px rgba(255,255,255,0.2);
}

.btn-primary:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 20px 40px -10px rgba(255,255,255,0.3), 0 0 0 2px rgba(34,197,94,0.3);
}

.btn-outline {
  background: transparent;
  border: 2px solid var(--text);
  color: var(--text);
  position: relative;
}

.btn-outline::after {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--text);
  transform: scaleX(0);
  transform-origin: right;
  transition: transform var(--duration-normal) var(--ease-out);
  z-index: -1;
  border-radius: 100px;
}

.btn-outline:hover {
  color: var(--bg);
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(255,255,255,0.1);
}

.btn-outline:hover::after {
  transform: scaleX(1);
  transform-origin: left;
}

/* Status Context */
.status-context {
  margin-top: 60px;
  padding: 32px 48px;
  background: var(--bg-elevated);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  box-shadow: 
    0 4px 20px rgba(0,0,0,0.2),
    0 0 0 1px rgba(34,197,94,0.1);
  position: relative;
  overflow: hidden;
  animation: float 6s ease-in-out infinite;
  transition: all var(--duration-normal) var(--ease-out);
}

.status-context:hover {
  transform: translateY(-5px);
  box-shadow: 
    0 20px 40px rgba(0,0,0,0.3),
    0 0 0 2px rgba(34,197,94,0.3);
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.status-label {
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  color: var(--accent);
}

.status-text {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  font-weight: 800;
  font-variant-numeric: tabular-nums;
}

.beta-badge {
  display: inline-block;
  background: var(--accent);
  color: var(--bg);
  font-size: 10px;
  font-weight: 900;
  padding: 4px 12px;
  border-radius: 100px;
  margin-left: 8px;
  animation: pulse 2s infinite;
  font-variant-numeric: tabular-nums;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.05); }
}

/* ============================================
   BENTO GRID
   ============================================ */
.bento-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  margin-top: 60px;
  perspective: 2000px;
}

/* Stagger Animation for Grid Items */
.bento-grid > * {
  opacity: 0;
  transform: translateY(30px);
  animation: staggerIn 0.6s var(--ease-out) forwards;
}

.bento-grid > *:nth-child(1) { animation-delay: 0.1s; }
.bento-grid > *:nth-child(2) { animation-delay: 0.15s; }
.bento-grid > *:nth-child(3) { animation-delay: 0.2s; }
.bento-grid > *:nth-child(4) { animation-delay: 0.25s; }
.bento-grid > *:nth-child(5) { animation-delay: 0.3s; }
.bento-grid > *:nth-child(6) { animation-delay: 0.35s; }

@keyframes staggerIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card {
  background: var(--bg-elevated);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  padding: 40px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  transition: all var(--duration-slow) cubic-bezier(0.16, 1, 0.3, 1);
  transform-style: preserve-3d;
  transform: translateZ(0);
}

.card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(34,197,94,0.05) 100%);
  opacity: 0;
  transition: opacity var(--duration-normal);
}

.card:hover {
  transform: translateY(-8px) translateZ(20px) rotateX(2deg);
  box-shadow: 
    0 30px 60px -20px rgba(0,0,0,0.5),
    0 0 0 1px rgba(34,197,94,0.3);
  border-color: rgba(34,197,94,0.4);
}

.card:hover::before {
  opacity: 1;
}

.card h2, .card h3 {
  font-weight: 900;
  font-style: italic;
  text-transform: uppercase;
  letter-spacing: -0.02em;
  transition: transform var(--duration-normal) var(--ease-out);
}

.card:hover h2, .card:hover h3 {
  transform: translateX(10px);
}

.card:active {
  transform: translateY(-4px) scale(0.98);
}

/* ============================================
   PLAYER CARDS
   ============================================ */
.player-card {
  min-height: 480px;
  background: #000;
  color: var(--text);
  border: none;
  padding: 0;
  position: relative;
  transform-style: preserve-3d;
}

.player-card:hover {
  transform: perspective(1000px) rotateY(5deg) rotateX(5deg) translateZ(20px);
}

.player-img {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center top;
  filter: grayscale(0.3);
  opacity: 0.9;
  transition: all var(--duration-slow) var(--ease-out);
}

.player-card:hover .player-img {
  filter: grayscale(0);
  transform: scale(1.05);
  opacity: 1;
}

.player-card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
  z-index: 1;
}

.player-info {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 40px 32px;
  z-index: 2;
  transform: translateY(20px);
  transition: transform var(--duration-normal) var(--ease-out);
}

.player-card:hover .player-info {
  transform: translateY(0);
}

.player-role {
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  color: var(--accent);
  letter-spacing: 0.15em;
  display: block;
  margin-bottom: 8px;
  opacity: 0;
  transform: translateY(20px);
  transition: all var(--duration-normal) 0.1s;
}

.player-card:hover .player-role {
  opacity: 1;
  transform: translateY(0);
}

.player-name {
  font-size: clamp(2rem, 4vw, 2.5rem);
  margin: 0;
  font-weight: 900;
  font-style: italic;
  letter-spacing: -0.02em;
}

.ovr-badge {
  position: absolute;
  top: 24px;
  right: 24px;
  background: var(--accent);
  color: #000;
  padding: 8px 16px;
  border-radius: 12px;
  font-weight: 900;
  font-size: 14px;
  z-index: 3;
  box-shadow: 0 10px 30px rgba(34,197,94,0.4);
  font-variant-numeric: tabular-nums;
  transform: scale(0) rotate(-10deg);
  animation: badgePop 0.5s var(--ease-spring) 0.5s forwards;
}

@keyframes badgePop {
  to { transform: scale(1) rotate(0); }
}

.player-card:hover .ovr-badge {
  transform: scale(1.1) rotate(5deg);
}

.player-status {
  position: absolute;
  top: 20px;
  left: 20px;
  background: rgba(0,0,0,0.8);
  color: var(--accent);
  padding: 6px 16px;
  border-radius: 100px;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 1px;
  z-index: 3;
  backdrop-filter: blur(10px);
  text-transform: uppercase;
}

.player-badges {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.badge {
  background: rgba(255,255,255,0.1);
  color: var(--text);
  padding: 4px 12px;
  border-radius: 100px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* ============================================
   TABLE (RATING)
   ============================================ */
.table-wrapper {
  background: var(--bg-elevated);
  border-radius: var(--radius);
  border: 1px solid var(--border);
  overflow: hidden;
  box-shadow: 0 10px 40px -20px rgba(0,0,0,0.3);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--text-secondary);
  padding: 24px;
  text-align: left;
  border-bottom: 1px solid var(--border);
  font-variant-numeric: tabular-nums;
}

td {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border);
  transition: all var(--duration-normal);
}

tbody tr {
  cursor: pointer;
  transition: all var(--duration-normal);
  position: relative;
}

tbody tr::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  height: 0;
  width: 3px;
  background: var(--accent);
  transition: all var(--duration-normal) var(--ease-out);
  transform: translateY(-50%);
}

tbody tr:hover {
  background: rgba(34,197,94,0.05);
  transform: translateX(10px);
}

tbody tr:hover::before {
  height: 60%;
}

tbody tr:active {
  transform: translateX(5px) scale(0.99);
}

.player-cell {
  display: flex;
  align-items: center;
  gap: 16px;
}

.player-avatar-sm {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid transparent;
  transition: all var(--duration-normal);
  background: var(--bg-skeleton);
}

tbody tr:hover .player-avatar-sm {
  border-color: var(--accent);
  transform: scale(1.1);
  box-shadow: 0 0 20px rgba(34,197,94,0.3);
}

.player-info-sm {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.player-name-sm {
  font-weight: 600;
  font-size: 15px;
  letter-spacing: -0.01em;
}

.player-role-sm {
  font-size: 12px;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.rank-cell {
  font-weight: 800;
  color: var(--text-secondary);
  font-variant-numeric: tabular-nums;
  font-size: 14px;
}

.ovr-cell {
  text-align: right;
}

.ovr-value {
  display: inline-flex;
  background: var(--accent);
  color: #000;
  padding: 8px 16px;
  border-radius: 12px;
  font-weight: 900;
  font-size: 14px;
  font-variant-numeric: tabular-nums;
}

/* Empty State */
.empty-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: 80px 20px;
  color: var(--text-secondary);
}

.empty-state-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.empty-state-title {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 8px;
  color: var(--text);
}

/* ============================================
   CONTROLS
   ============================================ */
.controls-row {
  margin-bottom: 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px;
}

.search-input {
  padding: 16px 28px;
  border-radius: 100px;
  border: 2px solid var(--border);
  background: var(--bg-elevated);
  width: 100%;
  max-width: 400px;
  font-size: 15px;
  font-weight: 500;
  transition: all var(--duration-normal) var(--ease-out);
  position: relative;
  color: var(--text);
  font-family: inherit;
}

.search-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 4px rgba(34,197,94,0.1), 0 10px 30px rgba(0,0,0,0.2);
  transform: translateY(-2px);
}

.search-input::placeholder {
  color: var(--text-secondary);
}

.filter-bar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 12px 24px;
  border-radius: 100px;
  border: 2px solid var(--border);
  background: var(--bg-elevated);
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-spring);
  position: relative;
  overflow: hidden;
  color: var(--text-secondary);
  font-family: inherit;
}

.filter-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--text);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform var(--duration-normal) var(--ease-out);
  z-index: -1;
}

.filter-btn:hover, .filter-btn.active {
  color: var(--bg);
  border-color: var(--text);
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

.filter-btn:hover::before, .filter-btn.active::before {
  transform: scaleX(1);
}

.filter-btn:active {
  transform: translateY(0) scale(0.95);
}

/* ============================================
   MODALS
   ============================================ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(20px) saturate(180%);
  z-index: 3000;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: all var(--duration-slow) var(--ease-out);
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

/* Mobile Sheet Style */
@media (max-width: 768px) {
  .modal-overlay {
    align-items: flex-end;
    padding: 0;
  }
  
  .modal-content {
    width: 100%;
    max-width: 100%;
    border-radius: var(--radius) var(--radius) 0 0;
    max-height: 90vh;
    transform: translateY(100%) !important;
    transition: transform var(--duration-slow) var(--ease-out);
  }
  
  .modal-overlay.active .modal-content {
    transform: translateY(0) !important;
  }
}

.modal-content {
  background: var(--bg-elevated);
  width: 100%;
  max-width: 520px;
  border-radius: 32px;
  padding: 48px;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 40px 80px -20px rgba(0,0,0,0.5);
  border: 1px solid var(--border);
  
  /* Desktop Animation */
  transform: perspective(1000px) rotateX(-30deg) translateY(100px) scale(0.8);
  opacity: 0;
  transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

.modal-overlay.active .modal-content {
  transform: perspective(1000px) rotateX(0) translateY(0) scale(1);
  opacity: 1;
}

.modal-header {
  position: sticky;
  top: -48px;
  background: var(--bg-elevated);
  padding: 20px 0;
  margin: -48px -48px 0 -48px;
  padding: 20px 48px;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  z-index: 10;
  border-bottom: 1px solid transparent;
  transition: border-color var(--duration-normal);
}

.modal-header.scrolled {
  border-color: var(--border);
}

.modal-close, .modal-action {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  background: rgba(255,255,255,0.05);
  color: var(--text);
  transition: all var(--duration-normal) var(--ease-spring);
  position: relative;
  overflow: hidden;
}

.modal-close:hover, .modal-action:hover {
  background: var(--text);
  color: var(--bg);
  transform: rotate(90deg) scale(1.1);
}

.modal-action:hover {
  transform: scale(1.1);
}

.modal-close:active, .modal-action:active {
  transform: rotate(90deg) scale(0.95);
}

.modal-image-container {
  width: 100%;
  aspect-ratio: 1;
  border-radius: var(--radius);
  overflow: hidden;
  margin: 60px 0 32px;
  position: relative;
  transform: translateZ(0);
  transition: transform var(--duration-normal);
  background: var(--bg-skeleton);
}

.modal-image-container:hover {
  transform: scale(1.02);
}

.modal-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--duration-slow) var(--ease-out);
}

.modal-image-container:hover .modal-image {
  transform: scale(1.05);
}

.modal-title-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 32px;
  gap: 20px;
}

.modal-info {
  flex: 1;
}

.modal-role {
  display: inline-block;
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  color: var(--accent);
  background: rgba(34,197,94,0.1);
  padding: 8px 16px;
  border-radius: 100px;
  margin-bottom: 12px;
  letter-spacing: 0.05em;
}

.modal-name {
  font-size: clamp(1.75rem, 5vw, 2.5rem);
  font-weight: 900;
  font-style: italic;
  line-height: 1.1;
  letter-spacing: -0.02em;
  margin: 0;
}

.modal-badges {
  display: flex;
  gap: 8px;
  margin-top: 16px;
  flex-wrap: wrap;
}

.modal-badge {
  background: var(--text);
  color: var(--bg);
  padding: 6px 14px;
  border-radius: 100px;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.modal-ovr {
  font-size: clamp(2.5rem, 6vw, 3.5rem);
  font-weight: 900;
  font-style: italic;
  color: var(--accent);
  font-variant-numeric: tabular-nums;
  line-height: 1;
}

/* Stat Bars */
.stats-grid {
  margin-bottom: 32px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.stat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
}

.stat-label {
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 700;
}

.stat-label-full {
  opacity: 0.6;
  font-weight: 500;
  margin-left: 4px;
  text-transform: none;
  letter-spacing: 0;
}

.stat-value {
  color: var(--text);
  font-weight: 800;
  font-variant-numeric: tabular-nums;
}

.stat-bar-bg {
  height: 8px;
  background: rgba(255,255,255,0.05);
  border-radius: 100px;
  overflow: hidden;
  position: relative;
}

.stat-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), #16a34a);
  border-radius: 100px;
  width: 0%;
  transition: width 1.5s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 0 20px rgba(34,197,94,0.3);
  position: relative;
  overflow: hidden;
}

.stat-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  animation: shimmer 2s infinite;
}

.modal-actions {
  display: flex;
  gap: 12px;
}

.modal-actions .btn {
  flex: 1;
}

/* ============================================
   TOAST NOTIFICATIONS
   ============================================ */
#toast-container {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10001;
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}

.toast {
  background: var(--text);
  color: var(--bg);
  padding: 16px 32px;
  border-radius: 100px;
  font-weight: 700;
  font-size: 14px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  animation: toastSlide 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  display: flex;
  align-items: center;
  gap: 10px;
  border: 1px solid rgba(0,0,0,0.1);
  font-variant-numeric: tabular-nums;
}

.toast-icon {
  font-size: 18px;
}

@keyframes toastSlide {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.9);
  }
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 1024px) {
  .bento-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
  :root {
    --header-height: 70px;
  }
  
  .nav-links { display: none; }
  .burger { display: flex; }
  
  .main-content { 
    padding: calc(var(--header-height) + 20px) 20px 60px; 
  }
  
  .bento-grid { 
    grid-template-columns: 1fr; 
    gap: 20px; 
  }
  
  .player-card { 
    min-height: 400px; 
  }
  
  .player-card:hover { 
    transform: translateY(-5px); 
  }
  
  .intro-block {
    padding: 40px 0 60px;
  }
  
  .controls-row {
    flex-direction: column;
    align-items: stretch;
  }
  
  .search-input {
    max-width: 100%;
  }
  
  .modal-content {
    padding: 32px;
    margin: 0;
    width: 100%;
    max-height: 95vh;
  }
  
  .modal-header {
    top: -32px;
    margin: -32px -32px 0 -32px;
    padding: 16px 32px;
  }
  
  .filter-bar {
    width: 100%;
    overflow-x: auto;
    padding-bottom: 10px;
    -webkit-overflow-scrolling: touch;
  }
  
  .filter-btn {
    white-space: nowrap;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus Visible for Accessibility */
:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 4px;
}

/* Scroll Lock Compensation */
body.scroll-locked {
  overflow: hidden;
  padding-right: var(--scrollbar-width, 0px);
}

/* Loading State */
.loading-shimmer {
  pointer-events: none;
  opacity: 0.7;
}
</style>
</head>
<body>

<!-- Preloader -->
<div id="preloader" role="status" aria-label="–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è">
  <div class="preloader-logo">BOX<span style="color: var(--accent);">1</span>V1</div>
</div>

<!-- Toast Container -->
<div id="toast-container" role="region" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"></div>

<!-- Navigation -->
<nav id="navbar" role="navigation" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
  <div class="nav-inner">
    <button class="logo" data-action="navigate" data-target="home" aria-label="–ù–∞ –≥–ª–∞–≤–Ω—É—é">
      BOX<span class="logo-accent">1</span>V1
    </button>
    
    <div class="nav-links">
      <button data-action="navigate" data-target="home" class="active" aria-label="–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">–ì–ª–∞–≤–Ω–∞—è</button>
      <button data-action="navigate" data-target="roster" aria-label="–°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
      <button data-action="navigate" data-target="stats" aria-label="–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤">–†–µ–π—Ç–∏–Ω–≥</button>
    </div>
    
    <button class="burger" id="burger" data-action="toggle-menu" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" aria-expanded="false" aria-controls="mobile-drawer">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</nav>

<!-- Mobile Drawer -->
<div class="drawer-overlay" id="drawer-overlay" data-action="close-menu" aria-hidden="true"></div>
<div class="mobile-drawer" id="mobile-drawer" role="dialog" aria-label="–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é" aria-modal="true">
  <button class="logo" data-action="navigate" data-target="home" style="font-size: 2rem; margin-bottom: 20px;">
    BOX<span class="logo-accent">1</span>V1
  </button>
  <button data-action="navigate" data-target="home">–ì–ª–∞–≤–Ω–∞—è</button>
  <button data-action="navigate" data-target="roster">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
  <button data-action="navigate" data-target="stats">–†–µ–π—Ç–∏–Ω–≥</button>
  <div class="btn-group" style="margin-top: auto;">
    <button class="btn btn-primary" data-action="open-modal" data-modal="apply">–°—Ç–∞—Ç—å —á–∞—Å—Ç—å—é</button>
  </div>
</div>

<!-- Main Content -->
<main class="main-content">
  <!-- Home Section -->
  <section id="home" class="active" aria-label="–ì–ª–∞–≤–Ω–∞—è">
    <div class="intro-block">
      <span class="tag">The Next Gen Football</span>
      <h1>BOX1V1.</h1>
      <p>–†–µ—à–∞–µ—Ç –Ω–µ –∫–æ–º–∞–Ω–¥–∞.<br>–†–µ—à–∞–µ—à—å —Ç—ã.</p>
      <div class="btn-group">
        <button class="btn btn-primary magnetic" data-action="navigate" data-target="roster">–£—á–∞—Å—Ç–Ω–∏–∫–∏</button>
        <button class="btn btn-outline magnetic" data-action="open-modal" data-modal="apply">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
      </div>
      
      <div class="status-context">
        <span class="status-label">–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞</span>
        <div class="status-text">
          üî• –ù–∞–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–∫—Ä—ã—Ç
          <span class="beta-badge">Beta</span>
        </div>
        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 8px;">–ü–µ—Ä–≤—ã–π —Å–µ–∑–æ–Ω —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø–æ—Å–ª–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ –≥—Ä—É–ø–ø</p>
      </div>
    </div>

    <div class="bento-grid">
      <article class="card tilt-card" style="grid-column: span 2;" data-action="open-modal" data-modal="rules" tabindex="0" role="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–≥–ª–∞–º–µ–Ω—Ç">
        <span style="font-size:12px; font-weight:800; color:var(--accent); text-transform:uppercase; letter-spacing:0.15em;">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</span>
        <h2 style="font-size: clamp(2.5rem, 5vw, 4rem); margin-top: 10px;">–†–ï–ì–õ–ê–ú–ï–ù–¢</h2>
        <p style="margin-top: 10px; color: var(--text-secondary);">–°–≤–æ–¥ –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–∞—Ç—á–µ–π.</p>
        <div style="margin-top:auto; padding-top:30px; font-weight:800; font-size:12px; text-transform:uppercase; color:var(--text-secondary); display: flex; align-items: center; gap: 8px;">
          –ò–∑—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ <span style="transition: transform 0.3s; display: inline-block;">‚Üí</span>
        </div>
      </article>
      
      <article class="card tilt-card" data-action="external-link" data-href="https://t.me/streetbox1v1" tabindex="0" role="link" aria-label="–û—Ç–∫—Ä—ã—Ç—å Telegram">
        <h3 style="font-size: 1.5rem; font-weight: 900; font-style: italic;">TELEGRAM</h3>
        <p style="margin-top: 10px; color: var(--text-secondary);">–°–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.</p>
      </article>
      
      <article class="card tilt-card" data-action="external-link" data-href="https://instagram.com/box.1v1" tabindex="0" role="link" aria-label="–û—Ç–∫—Ä—ã—Ç—å Instagram">
        <h3 style="font-size: 1.5rem; font-weight: 900; font-style: italic;">INSTAGRAM</h3>
        <p style="margin-top: 10px; color: var(--text-secondary);">–ì–ª–∞–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤ –º–µ–¥–∏–∞ —Ñ–æ—Ä–º–∞—Ç–µ.</p>
      </article>
    </div>
  </section>

  <!-- Roster Section -->
  <section id="roster" aria-label="–£—á–∞—Å—Ç–Ω–∏–∫–∏">
    <div style="margin-bottom: 60px;">
      <h1 class="text-sports" style="font-size: clamp(3rem, 10vw, 8rem); line-height:0.9;">
        –£–ß–ê–°–¢–ù–ò–ö–ò<span class="beta-badge" style="font-size: 0.12em; vertical-align: super; margin-left: 10px;">–ü—Ä–µ–¥–≤.</span>
      </h1>
      <p style="font-size: 1.25rem; margin-top:16px; color: var(--text-secondary);">–î–µ–π—Å—Ç–≤—É—é—â–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ BOX1V1</p>
    </div>
    
    <div class="controls-row">
      <input 
        type="search" 
        class="search-input" 
        id="playerSearch" 
        placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏..." 
        autocomplete="off"
        aria-label="–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤"
      >
      <div class="filter-bar" role="group" aria-label="–§–∏–ª—å—Ç—Ä –ø–æ —Ä–æ–ª–∏">
        <button class="filter-btn active" data-filter="all" aria-pressed="true">–í—Å–µ</button>
        <button class="filter-btn" data-filter="player" aria-pressed="false">–ü–æ–ª–µ–≤—ã–µ</button>
        <button class="filter-btn" data-filter="goalkeeper" aria-pressed="false">–í—Ä–∞—Ç–∞—Ä–∏</button>
      </div>
    </div>
    
    <div class="bento-grid" id="roster-grid" role="list" aria-label="–°–µ—Ç–∫–∞ –∏–≥—Ä–æ–∫–æ–≤">
      <!-- Skeleton Loading -->
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
      <div class="skeleton-card" role="listitem"><div class="skeleton" style="height:100%"></div></div>
    </div>
  </section>

  <!-- Stats Section -->
  <section id="stats" aria-label="–†–µ–π—Ç–∏–Ω–≥">
    <h1 class="text-sports" style="font-size: clamp(3rem, 10vw, 8rem); line-height:0.9; margin-bottom:40px;">
      –†–ï–ô–¢–ò–ù–ì<span class="beta-badge" style="font-size: 0.12em; vertical-align: super; margin-left: 10px;">–ü—Ä–µ–¥–≤.</span>
    </h1>
    <div class="table-wrapper">
      <table role="table" aria-label="–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞">
        <thead>
          <tr role="row">
            <th scope="col" role="columnheader">#</th>
            <th scope="col" role="columnheader">–ò–≥—Ä–æ–∫</th>
            <th scope="col" role="columnheader" style="text-align:right;">OVR</th>
          </tr>
        </thead>
        <tbody id="stats-body" role="rowgroup">
          <!-- Skeleton rows -->
          <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
          <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
          <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
        </tbody>
      </table>
    </div>
  </section>
</main>

<!-- Player Modal -->
<div class="modal-overlay" id="player-modal" role="dialog" aria-modal="true" aria-label="–ö–∞—Ä—Ç–æ—á–∫–∞ –∏–≥—Ä–æ–∫–∞" aria-hidden="true">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <button class="modal-action" data-action="download-card" aria-label="–°–∫–∞—á–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –∏–≥—Ä–æ–∫–∞" title="–°–∫–∞—á–∞—Ç—å">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
      </button>
      <button class="modal-close" data-action="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <div class="modal-image-container">
      <img class="modal-image" id="modal-img" src="" alt="–§–æ—Ç–æ –∏–≥—Ä–æ–∫–∞" loading="lazy">
    </div>
    
    <div class="modal-title-row">
      <div class="modal-info">
        <span class="modal-role" id="modal-role">ROLE</span>
        <h2 class="modal-name" id="modal-name">NAME</h2>
        <div class="modal-badges" id="modal-badges"></div>
      </div>
      <div class="modal-ovr font-tabular" id="modal-ovr">99</div>
    </div>
    
    <div class="stats-grid" id="modal-stats"></div>
    
    <div class="modal-actions">
      <button class="btn btn-primary" data-action="copy-id">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID</button>
      <button class="btn btn-outline" data-action="share-player">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
    </div>
  </div>
</div>

<!-- Apply Modal -->
<div class="modal-overlay" id="apply-modal" role="dialog" aria-modal="true" aria-label="–ó–∞—è–≤–∫–∞ –Ω–∞ —É—á–∞—Å—Ç–∏–µ" aria-hidden="true">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <button class="modal-close" data-action="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <h2 style="font-size: clamp(1.75rem, 5vw, 2.5rem); font-weight: 900; font-style: italic; margin: 60px 0 16px 0; letter-spacing: -0.02em;">–í–°–¢–£–ü–ò–¢–¨ –í BOX1V1</h2>
    <p style="margin-bottom: 32px; color: var(--text-secondary); line-height: 1.6;">–ß—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É, –æ—Å—Ç–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥ –ª—é–±—ã–º –ø–æ—Å—Ç–æ–º —Å —Ö–µ—à—Ç–µ–≥–æ–º <strong style="color: var(--text);">#BOX–£–ß–ê–°–¢–í–û–í–ê–¢–¨</strong>.</p>
    <button class="btn btn-primary" style="width: 100%;" data-action="external-link" data-href="https://t.me/streetbox1v1">–û—Ç–∫—Ä—ã—Ç—å Telegram</button>
  </div>
</div>

<!-- Rules Modal -->
<div class="modal-overlay" id="rules-modal" role="dialog" aria-modal="true" aria-label="–†–µ–≥–ª–∞–º–µ–Ω—Ç —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π" aria-hidden="true">
  <div class="modal-content" role="document" style="max-width: 600px;">
    <div class="modal-header">
      <button class="modal-close" data-action="close-modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <h2 style="font-size: clamp(1.75rem, 5vw, 2.5rem); font-weight: 900; font-style: italic; margin: 60px 0 32px 0; letter-spacing: -0.02em;">–†–ï–ì–õ–ê–ú–ï–ù–¢</h2>
    <div style="display: flex; flex-direction: column; gap: 24px;">
      <article class="rule-item" style="padding-bottom: 24px; border-bottom: 1px solid var(--border); transition: all var(--duration-normal);" onmouseover="this.style.paddingLeft='20px'; this.style.borderLeft='3px solid var(--accent)';" onmouseout="this.style.paddingLeft='0'; this.style.borderLeft='none';">
        <h3 style="font-size: 12px; font-weight: 800; text-transform: uppercase; color: var(--accent); margin-bottom: 8px; letter-spacing: 0.1em;">01. –§–æ—Ä–º–∞—Ç</h3>
        <p style="color: var(--text-secondary); line-height: 1.6; margin: 0;">–ú–∞—Ç—á–∏ 1 –Ω–∞ 1 —Å —É—á–∞—Å—Ç–∏–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –≤—Ä–∞—Ç–∞—Ä—è.</p>
      </article>
      <article class="rule-item" style="padding-bottom: 24px; border-bottom: 1px solid var(--border); transition: all var(--duration-normal);" onmouseover="this.style.paddingLeft='20px'; this.style.borderLeft='3px solid var(--accent)';" onmouseout="this.style.paddingLeft='0'; this.style.borderLeft='none';">
        <h3 style="font-size: 12px; font-weight: 800; text-transform: uppercase; color: var(--accent); margin-bottom: 8px; letter-spacing: 0.1em;">02. –¢–∞–π–º–∏–Ω–≥</h3>
        <p style="color: var(--text-secondary); line-height: 1.6; margin: 0;">–õ–∏–º–∏—Ç –Ω–∞ –∞—Ç–∞–∫—É ‚Äî 20 —Å–µ–∫—É–Ω–¥.</p>
      </article>
      <article class="rule-item" style="transition: all var(--duration-normal);" onmouseover="this.style.paddingLeft='20px'; this.style.borderLeft='3px solid var(--accent)';" onmouseout="this.style.paddingLeft='0'; this.style.borderLeft='none';">
        <h3 style="font-size: 12px; font-weight: 800; text-transform: uppercase; color: var(--accent); margin-bottom: 8px; letter-spacing: 0.1em;">03. –†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
        <p style="color: var(--text-secondary); line-height: 1.6; margin: 0;">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã –¥–æ –¥–≤—É—Ö –≥–æ–ª–æ–≤, –±–µ–∑ –Ω–∏—á—å–∏.</p>
      </article>
    </div>
  </div>
</div>

<script>
/**
 * BOX1V1 Application
 * Architecture: Config -> Store -> Render -> UI -> App
 * Pattern: Module pattern with clear separation of concerns
 */

// ============================================
// CONFIGURATION
// ============================================
const CONFIG = {
  csvUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vREjbeB6jNrU01kw1npVtFTvqGdP134ERjmyROoOYeYXbzjgL0ZCNK6KwF0VTk3c1yxZEZEUsJjy2Ur/pub?output=csv',
  selectors: {
    preloader: '#preloader',
    rosterGrid: '#roster-grid',
    statsBody: '#stats-body',
    playerSearch: '#playerSearch',
    modalPlayer: '#player-modal',
    modalApply: '#apply-modal',
    modalRules: '#rules-modal',
    mobileDrawer: '#mobile-drawer',
    drawerOverlay: '#drawer-overlay',
    burger: '#burger',
    toastContainer: '#toast-container'
  },
  classes: {
    active: 'active',
    open: 'open',
    scrollLocked: 'scroll-locked',
    skeleton: 'skeleton',
    empty: 'empty-state'
  },
  debounceDelay: 300,
  animationStagger: 50
};

// ============================================
// MOCK DATA (Replace with CSV fetch in production)
// ============================================
const playersData = [
  {
    id: 'player-1',
    name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä "–®—É—Å—Ç—Ä—ã–π" –ü–µ—Ç—Ä–æ–≤',
    ovr: 94,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 96, speed: 92, shot: 89, phys: 88 },
    photo: 'https://images.unsplash.com/photo-1517466787929-bc90951d0974?w=800&auto=format&fit=crop&q=80',
    status: '–ö–∞–ø–∏—Ç–∞–Ω',
    badges: ['MVP –°–µ–∑–æ–Ω–∞', '–¢–æ–ø –°–Ω–∞–π–ø–µ—Ä']
  },
  {
    id: 'player-2',
    name: '–î–º–∏—Ç—Ä–∏–π –ö–æ–≤–∞–ª–µ–≤',
    ovr: 91,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 88, speed: 95, shot: 90, phys: 85 },
    photo: 'https://images.unsplash.com/photo-1579952363873-27f3bade9f55?w=800&auto=format&fit=crop&q=80',
    status: '',
    badges: ['–ù–æ–≤–∏—á–æ–∫']
  },
  {
    id: 'player-3',
    name: '–ò–≤–∞–Ω "–°—Ç–µ–Ω–∞" –°–∏–¥–æ—Ä–æ–≤',
    ovr: 89,
    role: '–í—Ä–∞—Ç–∞—Ä—å',
    roleType: 'goalkeeper',
    stats: { ref: 94, div: 88, han: 92, pos: 90 }, // GK stats mapped to same fields
    photo: 'https://images.unsplash.com/photo-1560272564-c830400ea0be?w=800&auto=format&fit=crop&q=80',
    status: '–õ–µ–≥–µ–Ω–¥–∞',
    badges: ['–ß–∏—Å—Ç—ã–µ sheet']
  },
  {
    id: 'player-4',
    name: '–ú–∞–∫—Å–∏–º –õ–µ–±–µ–¥–µ–≤',
    ovr: 87,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 85, speed: 88, shot: 86, phys: 90 },
    photo: 'https://images.unsplash.com/photo-1543353071-087f9a7ce535?w=800&auto=format&fit=crop&q=80',
    status: '',
    badges: []
  },
  {
    id: 'player-5',
    name: '–ê—Ä—Ç–µ–º –í–æ–ª–∫–æ–≤',
    ovr: 85,
    role: '–ò–≥—Ä–æ–∫',
    roleType: 'player',
    stats: { drib: 90, speed: 82, shot: 84, phys: 80 },
    photo: '',
    status: '–¢—Ä–∞–≤–º–∞',
    badges: []
  },
  {
    id: 'player-6',
    name: '–°–µ—Ä–≥–µ–π "–ö–∞—Ç–æ–∫" –ù–æ–≤–∏–∫–æ–≤',
    ovr: 92,
    role: '–í—Ä–∞—Ç–∞—Ä—å',
    roleType: 'goalkeeper',
    stats: { ref: 96, div: 90, han: 89, pos: 88 },
    photo: 'https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800&auto=format&fit=crop&q=80',
    status: '',
    badges: ['–õ—É—á—à–∏–π –≤—Ä–∞—Ç–∞—Ä—å']
  }
];

// ============================================
// STORE (Data Management)
// ============================================
const Store = {
  players: [],
  filter: 'all', // all, player, goalkeeper
  searchQuery: '',
  currentPlayer: null,
  isLoading: true,

  async init() {
    try {
      // Simulate network delay for demo
      await new Promise(resolve => setTimeout(resolve, 800));
      
      // In production: fetch(CONFIG.csvUrl) and parse CSV
      this.players = playersData.map(p => ({
        ...p,
        // Normalize stats for display
        displayStats: p.role === '–í—Ä–∞—Ç–∞—Ä—å' ? [
          { key: 'REF', value: p.stats.ref || 0, label: '–†–µ–∞–∫—Ü–∏—è' },
          { key: 'DIV', value: p.stats.div || 0, label: '–ü—Ä—ã–∂–æ–∫' },
          { key: 'HAN', value: p.stats.han || 0, label: '–†—É–∫–∏' },
          { key: 'POS', value: p.stats.pos || 0, label: '–ü–æ–∑–∏—Ü–∏—è' }
        ] : [
          { key: 'DRI', value: p.stats.drib || 0, label: '–î—Ä–∏–±–ª–∏–Ω–≥' },
          { key: 'SPD', value: p.stats.speed || 0, label: '–°–∫–æ—Ä–æ—Å—Ç—å' },
          { key: 'SHT', value: p.stats.shot || 0, label: '–£–¥–∞—Ä' },
          { key: 'PHY', value: p.stats.phys || 0, label: '–§–∏–∑–∏–∫–∞' }
        ]
      }));
      
      this.isLoading = false;
      return true;
    } catch (error) {
      console.error('Store initialization error:', error);
      this.isLoading = false;
      throw error;
    }
  },

  getFilteredPlayers() {
    return this.players.filter(p => {
      const matchesSearch = p.name.toLowerCase().includes(this.searchQuery.toLowerCase());
      const matchesFilter = this.filter === 'all' || p.roleType === this.filter;
      return matchesSearch && matchesFilter;
    });
  },

  getSortedPlayers() {
    return [...this.players].sort((a, b) => b.ovr - a.ovr);
  },

  getPlayerById(id) {
    return this.players.find(p => p.id === id);
  },

  setFilter(filter) {
    this.filter = filter;
  },

  setSearch(query) {
    this.searchQuery = query;
  }
};

// ============================================
// RENDER (View Generation)
// ============================================
const Render = {
  // Skeleton screens
  showSkeletons(container, type = 'card') {
    if (type === 'card') {
      container.innerHTML = Array(4).fill(0).map((_, i) => `
        <div class="skeleton-card" role="listitem" style="animation-delay: ${i * 0.1}s">
          <div class="skeleton" style="height:100%"></div>
        </div>
      `).join('');
    } else if (type === 'table') {
      container.innerHTML = Array(5).fill(0).map(() => `
        <tr><td colspan="3"><div class="skeleton" style="height:60px; margin:10px 0;"></div></td></tr>
      `).join('');
    }
  },

  // Roster Grid
  roster(players, container) {
    if (players.length === 0) {
      container.innerHTML = `
        <div class="empty-state" role="status">
          <div class="empty-state-icon">üîç</div>
          <div class="empty-state-title">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>
          <p>–ü–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        </div>
      `;
      return;
    }

    container.innerHTML = players.map((p, index) => `
      <article 
        class="card player-card tilt-card" 
        role="listitem" 
        tabindex="0"
        data-player-id="${p.id}"
        style="animation-delay: ${index * CONFIG.animationStagger}ms"
      >
        ${p.status ? `<div class="player-status">${p.status}</div>` : ''}
        <div class="player-img" style="background-image: url('${p.photo || ''}')" loading="lazy"></div>
        <div class="player-info">
          <span class="player-role">${p.role}</span>
          <h3 class="player-name">${p.name}</h3>
          ${p.badges.length ? `
            <div class="player-badges">
              ${p.badges.map(b => `<span class="badge">${b}</span>`).join('')}
            </div>
          ` : ''}
        </div>
        <span class="ovr-badge font-tabular">${p.ovr}</span>
      </article>
    `).join('');
  },

  // Stats Table
  stats(players, container) {
    container.innerHTML = players.map((p, index) => `
      <tr data-player-id="${p.id}" tabindex="0" role="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É ${p.name}">
        <td class="rank-cell font-tabular">${(index + 1).toString().padStart(2, '0')}</td>
        <td>
          <div class="player-cell">
            <img 
              class="player-avatar-sm" 
              src="${p.photo || ''}" 
              alt="" 
              loading="lazy"
              onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
            >
            <div style="width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#16a34a);display:none;align-items:center;justify-content:center;color:var(--bg);font-weight:900;font-size:18px;">
              ${p.name.charAt(0)}
            </div>
            <div class="player-info-sm">
              <div class="player-name-sm">${p.name}</div>
              <div class="player-role-sm">${p.role}</div>
            </div>
          </div>
        </td>
        <td class="ovr-cell">
          <span class="ovr-value font-tabular">${p.ovr}</span>
        </td>
      </tr>
    `).join('');
  },

  // Player Modal
  playerModal(player) {
    Store.currentPlayer = player;
    
    document.getElementById('modal-name').textContent = player.name;
    document.getElementById('modal-role').textContent = player.role;
    document.getElementById('modal-ovr').textContent = player.ovr;
    
    const img = document.getElementById('modal-img');
    img.src = player.photo || '';
    img.onerror = () => { img.style.display = 'none'; };
    img.onload = () => { img.style.display = 'block'; };
    
    const badgesContainer = document.getElementById('modal-badges');
    badgesContainer.innerHTML = player.badges.length 
      ? player.badges.map(b => `<span class="modal-badge">${b}</span>`).join('')
      : '';
    
    const statsContainer = document.getElementById('modal-stats');
    statsContainer.innerHTML = player.displayStats.map((stat, i) => `
      <div class="stat-item">
        <div class="stat-header">
          <span class="stat-label">
            ${stat.key} <span class="stat-label-full">(${stat.label})</span>
          </span>
          <span class="stat-value font-tabular">${stat.value}</span>
        </div>
        <div class="stat-bar-bg">
          <div class="stat-bar-fill" data-width="${Math.min(stat.value, 100)}" style="width: 0%" data-index="${i}"></div>
        </div>
      </div>
    `).join('');

    // Animate bars after render
    setTimeout(() => {
      document.querySelectorAll('.stat-bar-fill').forEach((bar, i) => {
        setTimeout(() => {
          bar.style.width = bar.dataset.width + '%';
        }, i * 100);
      });
    }, 100);
  }
};

// ============================================
// UI (Interaction Layer)
// ============================================
const UI = {
  scrollBarWidth: 0,
  lastFocusedElement: null,

  init() {
    this.calculateScrollBarWidth();
    this.setupEventListeners();
    this.setupIntersectionObserver();
    this.setupModalScrollHeaders();
  },

  calculateScrollBarWidth() {
    const div = document.createElement('div');
    div.style.cssText = 'width:100px;height:100px;overflow:scroll;position:absolute;top:-9999px;';
    document.body.appendChild(div);
    this.scrollBarWidth = div.offsetWidth - div.clientWidth;
    document.body.removeChild(div);
    document.documentElement.style.setProperty('--scrollbar-width', `${this.scrollBarWidth}px`);
  },

  setupEventListeners() {
    // Event Delegation on Document
    document.addEventListener('click', (e) => {
      const actionEl = e.target.closest('[data-action]');
      if (!actionEl) return;

      const action = actionEl.dataset.action;
      const target = actionEl.dataset.target;
      const modal = actionEl.dataset.modal;
      const href = actionEl.dataset.href;
      const playerId = actionEl.closest('[data-player-id]')?.dataset.playerId;

      switch(action) {
        case 'navigate':
          this.switchTab(target);
          break;
        case 'toggle-menu':
          this.toggleMenu();
          break;
        case 'close-menu':
          this.closeMenu();
          break;
        case 'open-modal':
          this.openModal(modal);
          break;
        case 'close-modal':
          this.closeModal();
          break;
        case 'external-link':
          if (href) window.open(href, '_blank', 'noopener,noreferrer');
          break;
        case 'download-card':
          this.downloadCard();
          break;
        case 'copy-id':
          this.copyPlayerId();
          break;
        case 'share-player':
          this.sharePlayer();
          break;
      }

      // Player card click
      if (playerId) {
        const player = Store.getPlayerById(playerId);
        if (player) {
          Render.playerModal(player);
          this.openModal('player');
        }
      }
    });

    // Filter buttons
    document.querySelectorAll('[data-filter]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        document.querySelectorAll('[data-filter]').forEach(b => {
          b.classList.remove('active');
          b.setAttribute('aria-pressed', 'false');
        });
        e.target.classList.add('active');
        e.target.setAttribute('aria-pressed', 'true');
        
        Store.setFilter(e.target.dataset.filter);
        Render.roster(Store.getFilteredPlayers(), document.querySelector(CONFIG.selectors.rosterGrid));
      });
    });

    // Search with debounce
    const searchInput = document.querySelector(CONFIG.selectors.playerSearch);
    let debounceTimer;
    searchInput?.addEventListener('input', (e) => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(() => {
        Store.setSearch(e.target.value);
        Render.roster(Store.getFilteredPlayers(), document.querySelector(CONFIG.selectors.rosterGrid));
      }, CONFIG.debounceDelay);
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (document.querySelector(CONFIG.selectors.mobileDrawer).classList.contains('open')) {
          this.closeMenu();
        } else {
          this.closeModal();
        }
      }
    });

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
      const nav = document.getElementById('navbar');
      nav.classList.toggle('scrolled', window.scrollY > 50);
    }, { passive: true });

    // Magnetic buttons effect
    this.setupMagneticButtons();
  },

  setupMagneticButtons() {
    const isTouchDevice = window.matchMedia('(pointer: coarse)').matches;
    if (isTouchDevice) return;

    document.querySelectorAll('.magnetic').forEach(btn => {
      btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        
        btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
        btn.style.setProperty('--x', `${(e.clientX - rect.left) / rect.width * 100}%`);
        btn.style.setProperty('--y', `${(e.clientY - rect.top) / rect.height * 100}%`);
      });
      
      btn.addEventListener('mouseleave', () => {
        btn.style.transform = 'translate(0, 0)';
      });
    });
  },

  setupIntersectionObserver() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
  },

  setupModalScrollHeaders() {
    document.querySelectorAll('.modal-content').forEach(modal => {
      modal.addEventListener('scroll', () => {
        const header = modal.querySelector('.modal-header');
        if (header) {
          header.classList.toggle('scrolled', modal.scrollTop > 20);
        }
      });
    });
  },

  switchTab(tabId) {
    // Update nav
    document.querySelectorAll('.nav-links button').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.target === tabId);
    });

    // Update sections
    document.querySelectorAll('section').forEach(section => {
      const isActive = section.id === tabId;
      section.classList.toggle('active', isActive);
      
      if (isActive) {
        // Trigger reflow for animation
        void section.offsetWidth;
        section.classList.add('fade-in');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        section.classList.remove('fade-in');
      }
    });

    // Close mobile menu if open
    this.closeMenu();
  },

  toggleMenu() {
    const drawer = document.querySelector(CONFIG.selectors.mobileDrawer);
    const overlay = document.querySelector(CONFIG.selectors.drawerOverlay);
    const burger = document.querySelector(CONFIG.selectors.burger);
    const isOpen = drawer.classList.contains('open');

    if (isOpen) {
      this.closeMenu();
    } else {
      drawer.classList.add('open');
      overlay.classList.add('open');
      burger.classList.add('open');
      burger.setAttribute('aria-expanded', 'true');
      this.lockScroll();
    }
  },

  closeMenu() {
    const drawer = document.querySelector(CONFIG.selectors.mobileDrawer);
    const overlay = document.querySelector(CONFIG.selectors.drawerOverlay);
    const burger = document.querySelector(CONFIG.selectors.burger);

    drawer.classList.remove('open');
    overlay.classList.remove('open');
    burger.classList.remove('open');
    burger.setAttribute('aria-expanded', 'false');
    this.unlockScroll();
  },

  openModal(type) {
    const modalMap = {
      'player': CONFIG.selectors.modalPlayer,
      'apply': CONFIG.selectors.modalApply,
      'rules': CONFIG.selectors.modalRules
    };

    const modalId = modalMap[type];
    if (!modalId) return;

    const modal = document.querySelector(modalId);
    if (!modal) return;

    this.lastFocusedElement = document.activeElement;
    modal.classList.add('active');
    modal.setAttribute('aria-hidden', 'false');
    
    // Focus management
    setTimeout(() => {
      const closeBtn = modal.querySelector('[data-action="close-modal"]');
      if (closeBtn) closeBtn.focus();
    }, 100);

    this.lockScroll();
  },

  closeModal() {
    document.querySelectorAll('.modal-overlay').forEach(modal => {
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');
    });
    
    this.unlockScroll();
    
    if (this.lastFocusedElement) {
      this.lastFocusedElement.focus();
      this.lastFocusedElement = null;
    }
  },

  lockScroll() {
    document.body.classList.add(CONFIG.classes.scrollLocked);
  },

  unlockScroll() {
    document.body.classList.remove(CONFIG.classes.scrollLocked);
  },

  async downloadCard() {
    const btn = document.querySelector('[data-action="download-card"]');
    if (!btn) return;

    try {
      btn.style.opacity = '0.5';
      btn.disabled = true;
      this.showToast('‚è≥ –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç–æ—á–∫—É...');

      const modalContent = document.querySelector('#player-modal .modal-content');
      
      // Use requestAnimationFrame to not block UI
      await new Promise(resolve => requestAnimationFrame(resolve));
      
      const canvas = await html2canvas(modalContent, {
        scale: 2,
        useCORS: true,
        allowTaint: true,
        backgroundColor: '#141414',
        logging: false,
        onclone: (clonedDoc) => {
          // Ensure images are loaded in clone
          const img = clonedDoc.querySelector('#modal-img');
          if (img && img.src) {
            img.crossOrigin = 'anonymous';
          }
        }
      });

      // Check if canvas is empty (CORS error)
      const ctx = canvas.getContext('2d');
      const pixelData = ctx.getImageData(0, 0, 1, 1).data;
      if (pixelData.every(v => v === 0)) {
        throw new Error('CORS error');
      }

      const name = Store.currentPlayer?.name?.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9]/g, '_') || 'player';
      const link = document.createElement('a');
      link.download = `BOX1V1_${name}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
      
      this.showToast('‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
    } catch (error) {
      console.error('Download error:', error);
      this.showToast('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
    } finally {
      btn.style.opacity = '';
      btn.disabled = false;
    }
  },

  async copyPlayerId() {
    try {
      const name = Store.currentPlayer?.name;
      if (!name) return;
      
      await navigator.clipboard.writeText(name);
      this.showToast('üìã ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω');
    } catch (err) {
      this.showToast('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å');
    }
  },

  async sharePlayer() {
    const url = window.location.href;
    const player = Store.currentPlayer;
    
    if (navigator.share) {
      try {
        await navigator.share({
          title: `BOX1V1 - ${player?.name || '–ò–≥—Ä–æ–∫'}`,
          text: `–û—Ü–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞ ${player?.name} —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º ${player?.ovr} –≤ BOX1V1!`,
          url: url
        });
      } catch (err) {
        // User cancelled
      }
    } else {
      try {
        await navigator.clipboard.writeText(url);
        this.showToast('üîó –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞');
      } catch (err) {
        this.showToast('‚ùå –û—à–∏–±–∫–∞');
      }
    }
  },

  showToast(message, duration = 3000) {
    const container = document.querySelector(CONFIG.selectors.toastContainer);
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.innerHTML = `<span class="toast-icon">${message.split(' ')[0]}</span> ${message.split(' ').slice(1).join(' ')}`;
    
    container.appendChild(toast);
    
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transform = 'translateY(20px) scale(0.9)';
      setTimeout(() => toast.remove(), 500);
    }, duration);
  }
};

// ============================================
// APPLICATION INITIALIZATION
// ============================================
const App = {
  async init() {
    try {
      // Show skeletons immediately
      Render.showSkeletons(document.querySelector(CONFIG.selectors.rosterGrid), 'card');
      Render.showSkeletons(document.querySelector(CONFIG.selectors.statsBody), 'table');

      // Initialize UI
      UI.init();

      // Load data
      await Store.init();

      // Render content
      Render.roster(Store.getFilteredPlayers(), document.querySelector(CONFIG.selectors.rosterGrid));
      Render.stats(Store.getSortedPlayers(), document.querySelector(CONFIG.selectors.statsBody));

      // Hide preloader
      setTimeout(() => {
        document.querySelector(CONFIG.selectors.preloader).classList.add('loaded');
      }, 500);

    } catch (error) {
      console.error('App initialization error:', error);
      UI.showToast('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');
      document.querySelector(CONFIG.selectors.preloader).classList.add('loaded');
    }
  }
};

// Start application when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => App.init());
} else {
  App.init();
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>BOX1V1 | –¶–ò–§–†–û–í–ê–Ø –≠–ö–û–°–ò–°–¢–ï–ú–ê</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Syncopate:wght@700&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* –¢–≤–æ—è –±–∞–∑–∞ + –Ω–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ */
      --bg: #05070A; /* Deep Ink */
      --card: rgba(13, 13, 13, 0.6);
      --accent: #39FF14;
      --cyan: #00F0FF;   /* Speed */
      --orange: #FF5C00; /* Power */
      --violet: #8A2BE2; /* Icon */
      --text: #fff; 
      --text-dim: #86868b; 
      --border: rgba(255,255,255,0.08);
      --cubic: cubic-bezier(0.23, 1, 0.32, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html { scroll-behavior: smooth; background: var(--bg); }
    body { background: var(--bg); color: var(--text); font-family: 'Space Grotesk', -apple-system, sans-serif; overflow-x: hidden; }

    /* –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–ê–Ø –°–ï–¢–ö–ê (–§–û–ù) */
    #net-bg {
      position: fixed; inset: 0;
      background-image: 
        linear-gradient(var(--border) 1px, transparent 1px),
        linear-gradient(90deg, var(--border) 1px, transparent 1px);
      background-size: 60px 60px;
      perspective: 1000px;
      transform-style: preserve-3d;
      z-index: -1;
      opacity: 0.2;
      pointer-events: none;
    }
    
    /* –¢–í–û–ô –ü–†–ï–õ–û–ê–î–ï–† */
    #preloader {
      position: fixed; inset: 0; background: #000; z-index: 9999;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      transition: opacity 0.8s var(--cubic), visibility 0.8s;
    }
    .loader-content { text-align: center; }
    .loader-line { width: 120px; height: 2px; background: #111; margin: 0 auto; position: relative; overflow: hidden; border-radius: 2px; }
    .loader-line::after { 
      content: ''; position: absolute; left: -100%; width: 100%; height: 100%; 
      background: var(--accent); animation: loadingLine 1.5s infinite var(--cubic);
    }
    @keyframes loadingLine { 0% { left: -100%; } 100% { left: 100%; } }
    .loaded #preloader { opacity: 0; visibility: hidden; }

    /* –¢–í–û–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø (–£–ª—É—á—à–µ–Ω–Ω–∞—è) */
    nav { 
      position: fixed; top: 15px; left: 50%; transform: translateX(-50%);
      width: calc(100% - 30px); max-width: 1100px; z-index: 1000; 
      background: rgba(5, 7, 10, 0.6); backdrop-filter: blur(25px) saturate(180%);
      border: 1px solid var(--border); border-radius: 24px; transition: 0.4s var(--cubic);
    }
    body.scrolled nav { top: 0; width: 100%; border-radius: 0; background: rgba(0, 0, 0, 0.9); }
    .nav-inner { display: flex; justify-content: space-between; align-items: center; height: 64px; padding: 0 24px; }
    .nav-links { display: flex; gap: 2rem; }
    .nav-links a { 
        color: var(--text-dim); text-decoration: none; font-size: 11px; font-weight: 800; 
        text-transform: uppercase; letter-spacing: 1.5px; transition: 0.3s; position: relative;
    }
    .nav-links a.active { color: #fff; }
    .nav-links a.active::after { content: ''; position: absolute; bottom: -8px; left: 0; width: 100%; height: 2px; background: var(--accent); box-shadow: 0 0 10px var(--accent); }

    /* HERO –°–ï–ö–¶–ò–Ø */
    .hero { min-height: 85vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
    .hero h1 { font-family: 'Syncopate', sans-serif; font-size: clamp(3rem, 15vw, 10rem); font-weight: 900; line-height: 0.9; letter-spacing: -5px; text-transform: uppercase; }
    .shimmer-text { background: linear-gradient(90deg, #fff 0%, #444 50%, #fff 100%); background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: shine 5s linear infinite; }
    @keyframes shine { to { background-position: 200% center; } }

    /* BENTO GRID (3D EFFECT) */
    .bento-grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-auto-rows: 280px; gap: 20px; margin: 60px 0; }
    .bento-item { 
      background: var(--card); border-radius: 32px; border: 1px solid var(--border); 
      padding: 30px; display: flex; flex-direction: column; cursor: pointer; 
      transition: 0.5s var(--cubic); position: relative; overflow: hidden; backdrop-filter: blur(10px);
    }
    .bento-item:hover { transform: translateY(-10px) scale(1.02); border-color: var(--accent); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }

    /* STATUS & BADGES */
    .p-status-tag { position: absolute; top: 25px; right: 25px; font-size: 9px; font-weight: 900; color: var(--accent); text-transform: uppercase; background: rgba(57, 255, 20, 0.1); padding: 4px 10px; border-radius: 8px; border: 1px solid rgba(57, 255, 20, 0.2); z-index: 11; }
    
    .player-img-container { 
      position: absolute; right: 10px; bottom: 0; width: 180px; height: 180px; 
      transition: 0.6s var(--cubic); z-index: 1; filter: grayscale(1) brightness(0.8);
    }
    .bento-item:hover .player-img-container { filter: grayscale(0) brightness(1); transform: scale(1.1); }
    .player-img { width: 100%; height: 100%; object-fit: cover; mask-image: linear-gradient(to top, transparent 5%, black 40%); }

    /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û (ULTIMATE MODAL) */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(30px); z-index: 3000; display: none; align-items: center; justify-content: center; }
    .modal-overlay.active { display: flex; animation: fadeIn 0.4s var(--cubic); }
    .modal-card { 
      background: #0a0a0a; width: 95%; max-width: 1000px; border-radius: 40px; 
      border: 1px solid var(--border); padding: 50px; display: grid; grid-template-columns: 1fr 1.2fr; gap: 40px; position: relative; 
    }
    
    /* RADAR CHART */
    .radar-container { width: 100%; aspect-ratio: 1; background: rgba(255,255,255,0.02); border-radius: 50%; padding: 20px; border: 1px solid var(--border); }
    
    /* STYLE ID (GEAR) */
    .style-grid { display: grid; gap: 15px; margin-top: 30px; }
    .gear-slot {
      background: rgba(255,255,255,0.03); border: 1px solid var(--border);
      padding: 18px; border-radius: 20px; display: flex; align-items: center; gap: 15px;
      transition: 0.3s;
    }
    .gear-slot:hover { background: rgba(255,255,255,0.06); border-color: var(--cyan); }
    .gear-label { font-size: 9px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }
    .gear-value { font-weight: 700; font-size: 15px; }
    
    .rarity-icon { border-left: 4px solid var(--orange); color: var(--orange); }
    .rarity-pro { border-left: 4px solid var(--cyan); color: var(--cyan); }

    /* –ê–ù–ò–ú–ê–¶–ò–ò */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .reveal { opacity: 0; transform: translateY(30px); transition: 0.8s var(--cubic); }
    .reveal.active { opacity: 1; transform: translateY(0); }

    @media (max-width: 900px) {
      .modal-card { grid-template-columns: 1fr; padding: 30px; max-height: 90vh; overflow-y: auto; }
      .bento-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body class="loading">

  <div id="net-bg"></div>

  <div id="preloader">
    <div class="loader-content">
      <svg viewBox="0 0 400 100" width="180"><text x="0" y="80" fill="#fff" font-family="Syncopate" font-weight="900" font-size="60">BOX<tspan fill="#39FF14">1</tspan>V1</text></svg>
      <div class="loader-line"></div>
    </div>
  </div>

  <nav id="navbar">
    <div class="nav-inner">
      <div class="logo" onclick="switchTab('home')" style="cursor:pointer">
        <svg viewBox="0 0 400 100" width="100"><text x="0" y="80" fill="#fff" font-family="Syncopate" font-weight="900" font-size="70">BOX<tspan fill="#39FF14">1</tspan>V1</text></svg>
      </div>
      <div class="nav-links">
        <a href="#home" onclick="switchTab('home')" id="nav-home" class="active">–õ–µ–Ω—Ç–∞</a>
        <a href="#roster" onclick="switchTab('roster')" id="nav-roster">–°–æ—Å—Ç–∞–≤</a>
        <a href="#stats" onclick="switchTab('stats')" id="nav-stats">–†–µ–π—Ç–∏–Ω–≥</a>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <section id="home" class="active" style="padding: 0 24px;">
      <div class="hero reveal">
        <span style="font-weight:700; letter-spacing:5px; text-transform:uppercase; font-size:10px; color:var(--text-dim); margin-bottom: 20px;">Digital Football Ecosystem</span>
        <h1 class="shimmer-text">LEVEL<br>UP.</h1>
        <div id="timer" style="display:flex; gap:30px; margin-top:40px;">
          <div style="text-align:center"><div id="days" style="font-size:3rem; font-weight:900;">00</div><div style="font-size:10px; text-transform:uppercase; color:var(--text-dim);">–î–Ω–µ–π</div></div>
          <div style="text-align:center"><div id="hours" style="font-size:3rem; font-weight:900;">00</div><div style="font-size:10px; text-transform:uppercase; color:var(--text-dim);">–ß–∞—Å–æ–≤</div></div>
          <div style="text-align:center"><div id="mins" style="font-size:3rem; font-weight:900;">00</div><div style="font-size:10px; text-transform:uppercase; color:var(--text-dim);">–ú–∏–Ω</div></div>
        </div>
      </div>
    </section>

    <section id="roster" style="padding: 100px 24px;">
      <h2 class="shimmer-text reveal" style="font-family:'Syncopate'; font-size:clamp(2rem, 8vw, 5rem); margin-bottom:40px;">ROSTER</h2>
      <div class="bento-grid" id="roster-grid"></div>
    </section>

    <section id="stats" style="padding: 100px 24px;">
      <h2 class="shimmer-text reveal" style="font-family:'Syncopate'; font-size:clamp(2rem, 8vw, 5rem); margin-bottom:40px;">RANKING</h2>
      <div style="background: var(--card); border-radius: 32px; border: 1px solid var(--border); overflow: hidden;">
        <table style="width:100%; border-collapse:collapse;"><tbody id="stats-body"></tbody></table>
      </div>
    </section>
  </main>

  <div class="modal-overlay" id="playerModal" onclick="closeModal('playerModal')">
    <div class="modal-card" onclick="event.stopPropagation()">
      <div class="modal-visual">
        <div class="radar-container" id="m-radar"></div>
        <div id="m-img-box" style="margin-top:30px; border-radius:24px; overflow:hidden; height:200px; border:1px solid var(--border);">
            <img id="m-photo" src="" style="width:100%; height:100%; object-fit:cover;">
        </div>
      </div>
      
      <div class="modal-info">
        <h2 id="m-name" style="font-family:'Syncopate'; font-size:3.5rem; text-transform:uppercase; line-height:1;">NAME</h2>
        <div id="m-role" style="color:var(--accent); font-weight:900; margin:15px 0; letter-spacing:2px; text-transform:uppercase;">ROLE</div>
        <p id="m-bio" style="color:var(--text-dim); font-size:14px; line-height:1.6; margin-bottom:30px;"></p>
        
        <div class="style-grid">
          <div id="slot-boots" class="gear-slot">
            <span style="font-size:20px;">üëü</span>
            <div><div class="gear-label">Weapon</div><div id="val-boots" class="gear-value">-</div></div>
          </div>
          <div id="slot-fit" class="gear-slot">
            <span style="font-size:20px;">üëï</span>
            <div><div class="gear-label">Style</div><div id="val-fit" class="gear-value">-</div></div>
          </div>
        </div>
      </div>
      <div style="position:absolute; top:30px; right:30px; cursor:pointer; font-size:24px;" onclick="closeModal('playerModal')">‚úï</div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <script>
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vREjbeB6jNrU01kw1npVtFTvqGdP134ERjmyROoOYeYXbzjgL0ZCNK6KwF0VTk3c1yxZEZEUsJjy2Ur/pub?output=csv';
    let playersData = {};

    // –î–≤–∏–∂–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ –∑–∞ –º—ã—à—å—é
    document.addEventListener('mousemove', (e) => {
      const x = (e.clientX / window.innerWidth - 0.5) * 15;
      const y = (e.clientY / window.innerHeight - 0.5) * 15;
      document.getElementById('net-bg').style.transform = `rotateX(${y}deg) rotateY(${x}deg)`;
    });

    async function loadData() {
      Papa.parse(SHEET_URL, {
        download: true, header: true,
        complete: (results) => {
          results.data.forEach(row => {
            if(row['–ò–≥—Ä–æ–∫']) {
              playersData[row['–ò–≥—Ä–æ–∫']] = {
                r: row['r'], role: row['role'], photo: row['photo'],
                drib: row['dribble'] || 50, speed: row['speed'] || 50,
                shot: row['shot'] || 50, phys: row['phys'] || 50, pass: row['pass'] || 50,
                boots: row['gear_boots'], fit: row['gear_fit'], rarity: row['gear_rarity'],
                status: row['status'], bio: row['bio']
              };
            }
          });
          renderAll();
          document.body.classList.replace('loading', 'loaded');
        }
      });
    }

    function renderRoster() {
      const grid = document.getElementById('roster-grid');
      grid.innerHTML = Object.keys(playersData).map(name => {
        const p = playersData[name];
        return `
          <div class="bento-item reveal" onclick="openPlayerModal('${name}')">
            ${p.status ? `<div class="p-status-tag">${p.status}</div>` : ''}
            <div class="player-img-container"><img src="${p.photo}" class="player-img"></div>
            <span style="font-size:11px; font-weight:900; color:var(--accent); z-index:10">OVR ${p.r}</span>
            <h3 style="font-family:'Syncopate'; font-size:1.4rem; margin-top:10px; text-transform:uppercase; z-index:10">${name}</h3>
            <p style="margin-top:auto; font-size:9px; color:var(--text-dim); text-transform:uppercase; z-index:10">${p.role}</p>
          </div>
        `;
      }).join('');
      refreshAnimations();
    }

    function openPlayerModal(name) {
      const p = playersData[name];
      document.getElementById('m-name').innerText = name;
      document.getElementById('m-role').innerText = p.role;
      document.getElementById('m-photo').src = p.photo;
      document.getElementById('m-bio').innerText = p.bio || '–õ–µ–≥–µ–Ω–¥–∞ —É–ª–∏—á–Ω–æ–≥–æ —Ñ—É—Ç–±–æ–ª–∞.';
      document.getElementById('val-boots').innerText = p.boots || 'Standart';
      document.getElementById('val-fit').innerText = p.fit || 'Casual Fit';
      
      const rarityClass = `gear-slot rarity-${(p.rarity || 'basic').toLowerCase()}`;
      document.getElementById('slot-boots').className = rarityClass;
      document.getElementById('slot-fit').className = rarityClass;

      drawRadar({spd: p.speed, dri: p.drib, sho: p.shot, phy: p.phys, pas: p.pass});
      document.getElementById('playerModal').classList.add('active');
    }

    function drawRadar(s) {
      const size = 250; const center = size/2; const radius = size * 0.35;
      const keys = Object.keys(s); const points = [];
      keys.forEach((key, i) => {
        const angle = (Math.PI * 2 / keys.length) * i - Math.PI/2;
        const val = s[key] / 100;
        points.push(`${center + radius * val * Math.cos(angle)},${center + radius * val * Math.sin(angle)}`);
      });
      document.getElementById('m-radar').innerHTML = `
        <svg viewBox="0 0 ${size} ${size}">
          <circle cx="${center}" cy="${center}" r="${radius}" fill="none" stroke="rgba(255,255,255,0.05)" />
          <polygon points="${points.join(' ')}" fill="rgba(57, 255, 20, 0.2)" stroke="var(--accent)" stroke-width="2"/>
        </svg>`;
    }

    function renderStats() {
      const body = document.getElementById('stats-body');
      const sorted = Object.entries(playersData).sort((a,b) => b[1].r - a[1].r);
      body.innerHTML = sorted.map(([name, p], i) => `
        <tr onclick="openPlayerModal('${name}')" style="border-bottom: 1px solid var(--border);">
          <td style="padding:25px; color:var(--text-dim);">#${i+1}</td>
          <td style="padding:25px; font-weight:900; font-family:'Syncopate';">${name}</td>
          <td style="padding:25px; text-align:right; color:var(--accent); font-weight:900; font-size:1.5rem;">${p.r}</td>
        </tr>
      `).join('');
    }

    function switchTab(t) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
      document.getElementById(t).classList.add('active');
      document.getElementById('nav-' + t).classList.add('active');
      window.scrollTo(0,0); refreshAnimations();
    }

    function refreshAnimations() {
      const observer = new IntersectionObserver(entries => {
        entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('active'); });
      }, {threshold: 0.1});
      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }

    function updateTimer() {
      const diff = new Date("Mar 1, 2026 00:00:00").getTime() - new Date().getTime();
      if(diff > 0) {
        document.getElementById('days').innerText = Math.floor(diff / 864e5);
        document.getElementById('hours').innerText = Math.floor((diff % 864e5) / 36e5);
        document.getElementById('mins').innerText = Math.floor((diff % 36e5) / 6e4);
      }
    }

    function closeModal(id) { document.getElementById(id).classList.remove('active'); }

    window.addEventListener('load', () => { loadData(); setInterval(updateTimer, 1000); });
    window.addEventListener('scroll', () => { document.body.classList.toggle('scrolled', window.scrollY > 20); });
  </script>
</body>
</html>

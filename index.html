<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BOX1V1 | Global Elite</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,900&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #000; --card-bg: #0d0d0d; --accent: #39FF14;
      --text: #fff; --text-dim: #666; --border: #1a1a1a;
      --cubic: cubic-bezier(0.2, 1, 0.2, 1);
      --rank-gold: #FFD700; --rank-silver: #C0C0C0; --rank-bronze: #CD7F32;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }

    /* Поиск */
    .search-box { width: 100%; max-width: 400px; background: #111; border: 1px solid var(--border); padding: 1rem; border-radius: 12px; color: #fff; margin-bottom: 2rem; font-family: inherit; }
    .search-box:focus { border-color: var(--accent); outline: none; }

    nav { position: fixed; top: 0; width: 100%; z-index: 1000; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); }
    .nav-container { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; padding: 1rem 2rem; align-items: center; }
    .nav-links { display: flex; gap: 2rem; }
    .nav-links a { color: var(--text-dim); text-decoration: none; font-size: 0.75rem; font-weight: 800; text-transform: uppercase; cursor: pointer; }
    .nav-links a.active { color: var(--accent); }

    .container { max-width: 1200px; margin: 120px auto 0; padding: 0 2rem; }
    section { display: none; opacity: 0; transition: 0.3s var(--cubic); }
    section.active { display: block; opacity: 1; }

    h1 { font-size: clamp(2.5rem, 8vw, 6rem); font-weight: 900; font-style: italic; text-transform: uppercase; margin-bottom: 2rem; line-height: 0.9; }

    /* Таблица рейтинга */
    .league-table { width: 100%; border-collapse: collapse; margin-bottom: 5rem; }
    .league-table th { text-align: left; padding: 1rem; color: var(--text-dim); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 2px; border-bottom: 1px solid var(--border); }
    .league-table td { padding: 1.2rem 1rem; border-bottom: 1px solid var(--border); transition: 0.2s; cursor: pointer; }
    .league-table tr:hover td { background: #080808; color: var(--accent); }
    .t-rank { font-weight: 900; font-style: italic; width: 50px; }
    .t-ovr { font-weight: 900; }

    /* Таблица матчей */
    .match-row { display: grid; grid-template-columns: 1fr 80px 1fr; align-items: center; padding: 1.5rem; background: #0d0d0d; border-radius: 15px; margin-bottom: 0.5rem; text-align: center; border: 1px solid var(--border); }
    .m-score { background: #1a1a1a; padding: 0.5rem; border-radius: 8px; font-weight: 900; color: var(--accent); }
    .m-player { font-weight: 800; text-transform: uppercase; font-style: italic; }

    /* Оверлей */
    .overlay { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; opacity: 0; transition: 0.3s; padding: 2rem; overflow-y: auto; }
    .overlay.open { display: block; opacity: 1; }
    .close { position: fixed; top: 2rem; right: 2rem; color: var(--accent); font-weight: 900; cursor: pointer; }

    @media (max-width: 768px) {
      .match-row { grid-template-columns: 1fr; gap: 10px; }
      .league-table th:nth-child(3), .league-table td:nth-child(3) { display: none; }
    }
  </style>
</head>
<body>

  <nav>
    <div class="nav-container">
      <div class="nav-logo" onclick="showSection('home')">
        <svg viewBox="0 0 400 100" width="100" height="25"><text x="0" y="80" fill="#FFFFFF" font-family="Inter" font-weight="900" font-size="80" letter-spacing="12">BOX<tspan fill="#39FF14">1</tspan>V1</text></svg>
      </div>
      <div class="nav-links">
        <a onclick="showSection('home')" id="btn-home" class="active">HOME</a>
        <a onclick="showSection('ranking')" id="btn-ranking">ROSTER</a>
        <a onclick="showSection('matches')" id="btn-matches">MATCHES</a>
      </div>
    </div>
  </nav>

  <div class="container">
    
    <section id="home" class="active">
        <h1>TOP ELITE.</h1>
        <div id="top-three" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-bottom: 3rem;"></div>
        
        <h2 class="label" style="margin-bottom: 1rem;">RECENT DUELS</h2>
        <div id="recent-matches-home"></div>
    </section>

    <section id="ranking">
        <h1>GLOBAL<br>RANKING.</h1>
        <input type="text" class="search-box" id="playerSearch" placeholder="SEARCH ATHLETE..." oninput="filterPlayers()">
        <table class="league-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Athlete</th>
                    <th>Record (W/D/L)</th>
                    <th>OVR</th>
                </tr>
            </thead>
            <tbody id="full-ranking-body"></tbody>
        </table>
    </section>

    <section id="matches">
        <h1>MATCH HISTORY.</h1>
        <div id="all-matches-list"></div>
    </section>

  </div>

  <div class="overlay" id="p-overlay">
    <div class="close" onclick="closeProfile()">[ CLOSE ]</div>
    <div id="profile-content" style="max-width: 800px; margin: 10vh auto;"></div>
  </div>

  <script>
    // Генерация 500 игроков для теста
    const players = [];
    const firstNames = ['Kuznetsov', 'Volkov', 'Ivanov', 'Petrov', 'Smirnov', 'Mironov', 'Popov', 'Zuparov', 'Sidorov', 'Dmitriev'];
    
    for(let i = 0; i < 500; i++) {
        const r = Math.floor(Math.random() * (95 - 40) + 40);
        players.push({
            id: i,
            n: i < 10 ? firstNames[i] : `ATHLETE_${i+1}`, // Имена только первым 10
            r: r,
            w: Math.floor(r/2), d: Math.floor(Math.random()*10), l: Math.floor(Math.random()*20),
            h: ['W','L','W','W','W']
        });
    }

    const globalMatches = [
        {p1: 'Kuznetsov', p2: 'Volkov', s1: 5, s2: 3},
        {p1: 'Ivanov', p2: 'Petrov', s1: 2, s2: 2},
        {p1: 'Smirnov', p2: 'Mironov', s1: 0, s2: 4}
    ];

    window.onload = () => {
        players.sort((a, b) => b.r - a.r);
        renderTopThree();
        renderTable(players);
        renderMatches();
    };

    function renderTopThree() {
        const container = document.getElementById('top-three');
        players.slice(0, 3).forEach((p, i) => {
            container.innerHTML += `
                <div class="card" style="background:#111; padding: 2rem; border-radius: 20px; border: 1px solid var(--border);" onclick="openProfileById(${p.id})">
                    <span class="label">RANK #0${i+1}</span>
                    <div style="font-size: 5rem; font-weight: 900; color: ${getRankColor(p.r)};">${p.r}</div>
                    <div class="p-name" style="font-size: 1.5rem;">${p.n}</div>
                </div>
            `;
        });
    }

    function renderTable(data) {
        const body = document.getElementById('full-ranking-body');
        body.innerHTML = data.map((p, i) => `
            <tr onclick="openProfileById(${p.id})">
                <td class="t-rank">#${i+1}</td>
                <td class="m-player">${p.n}</td>
                <td style="color: var(--text-dim)">${p.w}W / ${p.d}D / ${p.l}L</td>
                <td class="t-ovr" style="color: ${getRankColor(p.r)}">${p.r}</td>
            </tr>
        `).join('');
    }

    function renderMatches() {
        const html = globalMatches.map(m => `
            <div class="match-row">
                <span class="m-player">${m.p1}</span>
                <span class="m-score">${m.s1} : ${m.s2}</span>
                <span class="m-player">${m.p2}</span>
            </div>
        `).join('');
        document.getElementById('recent-matches-home').innerHTML = html;
        document.getElementById('all-matches-list').innerHTML = html;
    }

    function filterPlayers() {
        const val = document.getElementById('playerSearch').value.toLowerCase();
        const filtered = players.filter(p => p.n.toLowerCase().includes(val));
        renderTable(filtered);
    }

    function getRankColor(r) {
        if(r >= 85) return 'var(--rank-gold)';
        if(r >= 70) return 'var(--rank-silver)';
        return 'var(--rank-bronze)';
    }

    function openProfileById(id) {
        const p = players.find(x => x.id === id);
        const wr = ((p.w / (p.w + p.d + p.l)) * 100).toFixed(0);
        document.getElementById('profile-content').innerHTML = `
            <h2 style="font-size: 5rem; font-style: italic; font-weight: 900;">${p.n}</h2>
            <div style="font-size: 10rem; font-weight: 900; color: ${getRankColor(p.r)}">${p.r}</div>
            <div style="display: flex; gap: 2rem; margin-top: 2rem;">
                <div><span class="label">Wins</span><div style="font-size: 2rem; font-weight:900;">${p.w}</div></div>
                <div><span class="label">Winrate</span><div style="font-size: 2rem; font-weight:900; color:var(--accent);">${wr}%</div></div>
            </div>
        `;
        const over = document.getElementById('p-overlay');
        over.style.display = 'block';
        setTimeout(() => over.classList.add('open'), 10);
    }

    function closeProfile() {
        const over = document.getElementById('p-overlay');
        over.classList.remove('open');
        setTimeout(() => over.style.display = 'none', 300);
    }

    function showSection(id) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
        document.getElementById('btn-' + id).classList.add('active');
        window.scrollTo(0,0);
    }
  </script>
</body>
</html>

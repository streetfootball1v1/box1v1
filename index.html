<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BOX1V1 | League Management</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,900&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #000; --card-bg: #0d0d0d; --accent: #39FF14;
      --text: #fff; --text-dim: #666; --border: #1a1a1a;
      --rank-gold: #FFD700; --rank-silver: #C0C0C0; --rank-bronze: #CD7F32;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
    body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; overflow-x: hidden; }

    /* Admin Panel Style */
    #admin-bar { background: var(--accent); color: #000; padding: 0.5rem; font-size: 0.6rem; font-weight: 900; text-align: center; cursor: pointer; text-transform: uppercase; }
    #admin-panel { display: none; background: #111; padding: 2rem; border-bottom: 2px solid var(--accent); }
    .admin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; max-width: 1200px; margin: 0 auto; }
    select, input { background: #000; border: 1px solid var(--border); color: #fff; padding: 0.8rem; border-radius: 8px; font-family: inherit; }

    nav { position: fixed; top: 25px; width: 100%; z-index: 1000; background: rgba(0,0,0,0.8); backdrop-filter: blur(15px); border-bottom: 1px solid var(--border); }
    .nav-container { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; padding: 1rem 2rem; align-items: center; }
    .nav-links a { color: var(--text-dim); text-decoration: none; font-size: 0.7rem; font-weight: 900; margin-left: 2rem; cursor: pointer; transition: 0.2s; }
    .nav-links a.active { color: var(--accent); }

    .container { max-width: 1200px; margin: 150px auto 0; padding: 0 2rem; }
    section { display: none; opacity: 0; transition: 0.3s; }
    section.active { display: block; opacity: 1; }

    /* Filters */
    .filters { display: flex; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap; }
    .f-btn { background: #111; border: 1px solid var(--border); color: var(--text-dim); padding: 0.6rem 1.2rem; border-radius: 50px; font-size: 0.7rem; font-weight: 800; cursor: pointer; transition: 0.2s; }
    .f-btn:hover, .f-btn.active { border-color: var(--accent); color: #fff; }

    /* Table & Badges */
    .league-table { width: 100%; border-collapse: collapse; }
    .league-table td { padding: 1.2rem; border-bottom: 1px solid var(--border); cursor: pointer; }
    .badge { font-size: 0.55rem; padding: 2px 6px; border-radius: 4px; font-weight: 900; margin-left: 8px; text-transform: uppercase; border: 1px solid currentColor; }
    .b-wall { color: #50b7f5; }
    .b-vet { color: #f5a623; }
    .streak-fire { color: #ff4500; margin-left: 5px; font-style: normal; }

    /* Match History Row */
    .match-card { display: flex; justify-content: space-between; align-items: center; background: #0d0d0d; padding: 1.5rem; border-radius: 15px; margin-bottom: 0.5rem; border: 1px solid var(--border); }
    .score-chip { background: #1a1a1a; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 900; color: var(--accent); min-width: 70px; text-align: center; }

    /* Overlay */
    .overlay { position: fixed; inset: 0; background: #000; z-index: 2000; display: none; padding: 2rem; overflow-y: auto; }
    .overlay.open { display: block; }
    .close { position: fixed; top: 2rem; right: 2rem; color: var(--accent); font-weight: 900; cursor: pointer; }

    footer { padding: 4rem; text-align: center; color: var(--text-dim); font-size: 0.7rem; letter-spacing: 2px; }
  </style>
</head>
<body>

  <div id="admin-bar" onclick="toggleAdmin()">Staff Access: Record Match Results</div>
  <div id="admin-panel">
    <div class="admin-grid">
        <select id="p1-select"></select>
        <input type="number" id="p1-score" placeholder="Score P1">
        <span style="align-self: center; text-align: center; font-weight: 900;">VS</span>
        <input type="number" id="p2-score" placeholder="Score P2">
        <select id="p2-select"></select>
        <button class="f-btn active" onclick="submitMatch()">Submit Result</button>
    </div>
  </div>

  <nav>
    <div class="nav-container">
      <div style="font-weight: 900; font-style: italic; font-size: 1.2rem;">BOX1V1</div>
      <div class="nav-links">
        <a onclick="showSection('home')" id="btn-home" class="active">LEADERBOARD</a>
        <a onclick="showSection('matches')" id="btn-matches">MATCHES</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <section id="home" class="active">
        <div class="filters">
            <button class="f-btn active" onclick="filterRank('all', this)">ALL</button>
            <button class="f-btn" onclick="filterRank('gold', this)">GOLD (85+)</button>
            <button class="f-btn" onclick="filterRank('silver', this)">SILVER (70+)</button>
            <button class="f-btn" onclick="filterRank('bronze', this)">BRONZE (<70)</button>
            <input type="text" id="search" placeholder="FIND ATHLETE..." oninput="searchPlayer()" style="margin-left: auto; height: 35px; padding: 0 1rem; font-size: 0.7rem;">
        </div>
        <table class="league-table">
            <tbody id="leaderboard-body"></tbody>
        </table>
    </section>

    <section id="matches">
        <h2 class="label" style="margin-bottom: 2rem;">GLOBAL MATCH FEED</h2>
        <div id="matches-feed"></div>
    </section>
  </div>

  <div class="overlay" id="p-overlay">
    <div class="close" onclick="closeProfile()">[ CLOSE ]</div>
    <div id="p-content" style="max-width: 800px; margin: 10vh auto;"></div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 100 –∏–≥—Ä–æ–∫–æ–≤ (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, –º–æ–∂–Ω–æ 500)
    let players = [];
    const names = ['Kuznetsov', 'Volkov', 'Ivanov', 'Petrov', 'Smirnov', 'Mironov', 'Popov', 'Zuparov', 'Sidorov', 'Dmitriev'];
    for(let i=0; i<100; i++) {
        const rating = Math.floor(Math.random() * 50 + 45);
        players.push({
            id: i,
            n: i < 10 ? names[i] : `PLAYER_${i+1}`,
            r: rating,
            w: Math.floor(rating/10), d: 2, l: 5,
            h: ['W','W','W','L','W'], // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5
            goals: Math.floor(Math.random()*50)
        });
    }

    let matches = [
        {p1: 'Kuznetsov', p2: 'Volkov', s1: 10, s2: 8, date: 'JAN 24'}
    ];

    window.onload = () => {
        updateAll();
        populateAdminSelectors();
    };

    function updateAll() {
        players.sort((a,b) => b.r - a.r);
        renderLeaderboard(players);
    }

    function renderLeaderboard(data) {
        const body = document.getElementById('leaderboard-body');
        body.innerHTML = data.map((p, i) => {
            const isHot = p.h.slice(0,3).every(x => x === 'W');
            const badges = [];
            if(p.r >= 90) badges.push('<span class="badge b-vet">ELITE</span>');
            if(p.l < 3) badges.push('<span class="badge b-wall">WALL</span>');
            
            return `
                <tr onclick="openProfile(${p.id})">
                    <td style="width: 50px; font-weight: 900; font-style: italic;">#${i+1}</td>
                    <td style="font-weight: 800; font-style: italic;">
                        ${p.n.toUpperCase()} ${isHot ? '<span class="streak-fire">üî•</span>' : ''}
                        ${badges.join('')}
                    </td>
                    <td style="color: var(--text-dim); font-size: 0.7rem;">${p.w}W - ${p.d}D - ${p.l}L</td>
                    <td style="text-align: right; font-weight: 900; color: ${getRankColor(p.r)}">${p.r}</td>
                </tr>
            `;
        }).join('');
    }

    function filterRank(rank, btn) {
        document.querySelectorAll('.f-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        let filtered = players;
        if(rank === 'gold') filtered = players.filter(p => p.r >= 85);
        if(rank === 'silver') filtered = players.filter(p => p.r >= 70 && p.r < 85);
        if(rank === 'bronze') filtered = players.filter(p => p.r < 70);
        renderLeaderboard(filtered);
    }

    function searchPlayer() {
        const val = document.getElementById('search').value.toLowerCase();
        const filtered = players.filter(p => p.n.toLowerCase().includes(val));
        renderLeaderboard(filtered);
    }

    function getRankColor(r) {
        if(r >= 85) return 'var(--rank-gold)';
        if(r >= 70) return 'var(--rank-silver)';
        return 'var(--rank-bronze)';
    }

    /* ADMIN LOGIC */
    function toggleAdmin() {
        const p = document.getElementById('admin-panel');
        p.style.display = p.style.display === 'block' ? 'none' : 'block';
    }

    function populateAdminSelectors() {
        const s1 = document.getElementById('p1-select');
        const s2 = document.getElementById('p2-select');
        const opts = players.map(p => `<option value="${p.id}">${p.n}</option>`).join('');
        s1.innerHTML = opts; s2.innerHTML = opts;
    }

    function submitMatch() {
        const id1 = parseInt(document.getElementById('p1-select').value);
        const id2 = parseInt(document.getElementById('p2-select').value);
        const s1 = parseInt(document.getElementById('p1-score').value);
        const s2 = parseInt(document.getElementById('p2-score').value);

        if(isNaN(s1) || isNaN(s2)) return alert("Enter score!");

        const p1 = players.find(x => x.id === id1);
        const p2 = players.find(x => x.id === id2);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ OVR (–ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: –ø–æ–±–µ–¥–∏—Ç–µ–ª—å +2, –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π -1)
        if(s1 > s2) { p1.r += 2; p1.w++; p1.h.unshift('W'); p2.r -= 1; p2.l++; p2.h.unshift('L'); }
        else if(s1 < s2) { p2.r += 2; p2.w++; p2.h.unshift('W'); p1.r -= 1; p1.l++; p1.h.unshift('L'); }
        else { p1.d++; p1.h.unshift('D'); p2.d++; p2.h.unshift('D'); }

        p1.h = p1.h.slice(0,5); p2.h = p2.h.slice(0,5);

        matches.unshift({p1: p1.n, p2: p2.n, s1, s2, date: 'JUST NOW'});
        renderMatches();
        updateAll();
        toggleAdmin();
    }

    function renderMatches() {
        document.getElementById('matches-feed').innerHTML = matches.map(m => `
            <div class="match-card">
                <span class="m-player">${m.p1.toUpperCase()}</span>
                <div class="score-chip">${m.s1} : ${m.s2}</div>
                <span class="m-player" style="text-align: right;">${m.p2.toUpperCase()}</span>
            </div>
        `).join('');
    }

    function showSection(id) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
        document.getElementById('btn-'+id).classList.add('active');
        if(id === 'matches') renderMatches();
    }

    function openProfile(id) {
        const p = players.find(x => x.id === id);
        document.getElementById('p-content').innerHTML = `
            <div style="text-transform: uppercase;">
                <span class="label">ATHLETE PROFILE</span>
                <h2 style="font-size: 4rem; font-style: italic; font-weight: 900;">${p.n}</h2>
                <div style="font-size: 10rem; font-weight: 900; color: ${getRankColor(p.r)}">${p.r}</div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 2rem;">
                    <div class="match-card" style="flex-direction: column; align-items: flex-start;">
                        <span class="label">WINRATE</span>
                        <span style="font-size: 2rem; font-weight: 900; color: var(--accent);">${((p.w/(p.w+p.d+p.l))*100).toFixed(0)}%</span>
                    </div>
                    <div class="match-card" style="flex-column; grid-column: span 2;">
                        <div>
                            <span class="label">FORM (LAST 5)</span>
                            <div style="display: flex; gap: 5px; margin-top: 5px;">
                                ${p.h.map(r => `<div style="width:20px; height:20px; background:${r==='W'?'var(--accent)':r==='L'?'#ff3131':'#555'}; border-radius:3px;"></div>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.getElementById('p-overlay').style.display = 'block';
        setTimeout(() => document.getElementById('p-overlay').classList.add('open'), 10);
    }

    function closeProfile() {
        document.getElementById('p-overlay').classList.remove('open');
        setTimeout(() => document.getElementById('p-overlay').style.display = 'none', 300);
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>BOX1V1 | ЦИФРОВАЯ ЭКОСИСТЕМА</title>
<meta name="description" content="BOX1V1 — закрытая экосистема для футболистов 1 на 1. Техника, медиа и скаутинг.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://box1v1.ru/">
<meta property="og:title" content="BOX1V1 | ЦИФРОВАЯ ЭКОСИСТЕМА">
<meta property="og:description" content="Стань частью элитарного сообщества футболистов 1x1. Рейтинги, карточки и статистика.">
<meta property="og:image" content="https://box1v1.ru/preview-og.jpg">

<!-- Preload критичных ресурсов -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">

<!-- Inline critical CSS -->
<style>
/* CRITICAL CSS - загружается мгновенно */
:root {
  --bg: #ffffff;
  --bg-alt: #f8f8f8;
  --card: #ffffff;
  --text: #0a0a0a;
  --text-dim: #404040;
  --border: rgba(0,0,0,0.08);
  --accent: #15803d;
  --accent-light: #22c55e;
  --accent-dark: #166534;
  --ls-tight: -0.04em;
  --ls-normal: -0.01em;
  --lh-tight: 1.1;
  --lh-base: 1.6;
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
  --shadow-md: 0 20px 40px -12px rgba(0,0,0,0.12);
  --cubic: cubic-bezier(0.2, 0, 0, 1);
  --glass: rgba(255,255,255,0.9);
  --radius: 24px;
  --radius-sm: 14px;
}

* { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
  -webkit-tap-highlight-color: transparent; 
}

html {
  scroll-behavior: smooth;
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
  line-height: var(--lh-base);
  letter-spacing: var(--ls-normal);
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0a0a0a;
    --bg-alt: #1a1a1a;
    --card: #1a1a1a;
    --text: #ffffff;
    --text-dim: #a0a0a0;
    --border: rgba(255,255,255,0.1);
    --glass: rgba(26,26,26,0.9);
  }
}

/* PRELOADER */
#preloader {
  position: fixed; 
  inset: 0; 
  background: var(--bg); 
  z-index: 9999;
  display: flex; 
  justify-content: center; 
  align-items: center;
  transition: opacity 0.8s var(--cubic), visibility 0.8s;
}
#preloader.loaded { 
  opacity: 0; 
  visibility: hidden; 
}

/* SKELETON LOADING STATES */
.skeleton {
  background: linear-gradient(90deg, 
    var(--bg-alt) 25%, 
    rgba(255,255,255,0.5) 50%, 
    var(--bg-alt) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: var(--radius);
}

.skeleton-text {
  height: 1em;
  margin-bottom: 0.5em;
  border-radius: 4px;
}

.skeleton-image {
  width: 100%;
  height: 200px;
  border-radius: var(--radius);
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* NAVIGATION */
nav {
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 72px;
  background: var(--glass); 
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px); 
  z-index: 1000;
  transition: 0.4s var(--cubic); 
  border-bottom: 1px solid transparent;
}
body.scrolled nav {
  border-bottom: 1px solid var(--border);
  background: rgba(255,255,255,0.97); 
  height: 64px;
}
@media (prefers-color-scheme: dark) {
  body.scrolled nav {
    background: rgba(26,26,26,0.97);
  }
}

.nav-inner {
  max-width: 1300px; 
  margin: 0 auto; 
  height: 100%;
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  padding: 0 32px;
}

.logo {
  font-size: 1.4rem; 
  font-weight: 900; 
  font-style: italic; 
  letter-spacing: -1px; 
  cursor: pointer;
  transition: 0.3s;
  color: var(--text);
}
.logo:hover { opacity: 0.7; }

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  * { animation-duration: 0.01ms !important; }
}

/* Основные секции скрыты до загрузки */
.main-content { opacity: 0; }
.main-content.loaded { opacity: 1; transition: opacity 0.3s; }

@keyframes load { 
  0% { transform: translateX(-100%); } 
  100% { transform: translateX(100%); } 
}
</style>

<!-- Deferred non-critical CSS -->
<link rel="stylesheet" href="styles.css" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="styles.css"></noscript>
</head>
<body>
<div id="toast-container"></div>

<div id="preloader" role="status" aria-label="Загрузка">
  <div style="text-align:center;">
    <h2 style="font-size:3rem; margin-bottom:10px; color: var(--text);">BOX<span style="color:var(--accent)">1</span>V1</h2>
    <div style="width:140px; height:2px; background:var(--bg-alt); margin:0 auto; position:relative; overflow:hidden;">
      <div style="position:absolute; width:60%; height:100%; background:var(--text); animation: load 1.5s infinite var(--cubic);"></div>
    </div>
  </div>
</div>

<nav id="navbar">
  <div class="nav-inner">
    <div class="logo" onclick="window.switchTab('home')" aria-label="На главную" tabindex="0" role="button">BOX<span style="color:var(--accent)">1</span>V1</div>
    <div class="nav-links" role="navigation">
      <a href="#home" onclick="window.switchTab('home')" class="active" id="btn-home">Главная</a>
      <a href="#roster" onclick="window.switchTab('roster')" id="btn-roster">УЧАСТНИКИ</a>
      <a href="#stats" onclick="window.switchTab('stats')" id="btn-stats">Рейтинг</a>
    </div>
    <button class="burger" id="burger" onclick="window.toggleMenu()" aria-label="Меню" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<div class="drawer-overlay" id="drawer-overlay" onclick="window.toggleMenu()"></div>
<div class="mobile-drawer" id="mobile-drawer">
  <a href="#home" onclick="window.handleMobileNav('home')">Главная</a>
  <a href="#roster" onclick="window.handleMobileNav('roster')">Список</a>
  <a href="#stats" onclick="window.handleMobileNav('stats')">Рейтинг</a>
  <div style="margin-top:auto;">
    <button class="btn btn-primary" style="width:100%" onclick="window.handleMobileNav('applyModal', true)">Стать частью</button>
  </div>
</div>

<main class="main-content" id="main-content">
  <!-- Секции будут заполняться JavaScript -->
</main>

<!-- Модальные окна -->
<div class="modal-overlay" id="playerModal" role="dialog" aria-modal="true" aria-label="Карточка игрока">
  <div class="modal-content">
    <button class="modal-close" onclick="window.closeModal('playerModal')" aria-label="Закрыть">✕</button>
    <div id="m-img-container" class="skeleton skeleton-image"></div>
    <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-top: 32px;">
      <div>
        <span id="m-role" class="skeleton skeleton-text" style="width: 60px;"></span>
        <h2 id="m-name" class="skeleton skeleton-text" style="width: 200px; height: 2.5rem; margin-top: 12px;"></h2>
        <div id="m-badges" style="display:flex; gap:8px; margin-top:16px; flex-wrap:wrap;"></div>
      </div>
      <div id="m-ovr" class="skeleton skeleton-text" style="width: 60px; height: 3rem;"></div>
    </div>
    <div id="m-stats" style="margin-top:40px;"></div>
    <div style="margin-top:48px; display:flex; gap:12px; flex-wrap:wrap;">
      <button class="btn btn-primary" style="flex:1; min-width:140px;" onclick="window.copyPlayerID()">Копировать ID</button>
      <button class="btn btn-outline" style="flex:1; min-width:140px;" onclick="window.sharePlayer()">Поделиться</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="applyModal" role="dialog" aria-modal="true">
  <div class="modal-content">
    <button class="modal-close" onclick="window.closeModal('applyModal')">✕</button>
    <h2 style="font-size:2rem; margin-bottom:20px; color: var(--text);">ВСТУПИТЬ В BOX1V1</h2>
    <p style="margin-bottom:32px; color: var(--text-dim);">Чтобы оформить заявку, оставь комментарий под любым постом с хештегом #BOXУЧАСТВОВАТЬ.</p>
    <button class="btn btn-primary" style="width:100%; padding:24px;" onclick="window.open('https://t.me/streetbox1v1')">Открыть Telegram</button>
  </div>
</div>

<div class="modal-overlay" id="rulesModal" role="dialog" aria-modal="true">
  <div class="modal-content" style="max-width: 600px;">
    <button class="modal-close" onclick="window.closeModal('rulesModal')">✕</button>
    <h2 style="font-size:2rem; margin-bottom:32px; color: var(--text);">РЕГЛАМЕНТ</h2>
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div style="padding-bottom:15px; border-bottom:1px solid var(--border);">
        <strong style="text-transform:uppercase; font-size:12px; display:block; margin-bottom:4px; color:var(--accent)">01. Формат</strong>
        <p style="font-size:15px; color:var(--text); font-weight:500;">Матчи 1 на 1 с участием независимого вратаря.</p>
      </div>
      <div style="padding-bottom:15px; border-bottom:1px solid var(--border);">
        <strong style="text-transform:uppercase; font-size:12px; display:block; margin-bottom:4px; color:var(--accent)">02. Тайминг</strong>
        <p style="font-size:15px; color:var(--text); font-weight:500;">Лимит на атаку — 20 секунд.</p>
      </div>
      <div style="padding-bottom:15px; border-bottom:1px solid var(--border);">
        <strong style="text-transform:uppercase; font-size:12px; display:block; margin-bottom:4px; color:var(--accent)">03. Результат</strong>
        <p style="font-size:15px; color:var(--text); font-weight:500;">Продолжительность игры до двух голов, без ничьи.</p>
      </div>
    </div>
  </div>
</div>

<!-- Загружаем основной скрипт -->
<script type="module">
  import { initApp } from './app.js';
  
  // Добавляем обработчик кликов для модальных оверлеев
  document.addEventListener('DOMContentLoaded', () => {
    // Инициализируем приложение
    initApp();
    
    // Добавляем глобальные обработчики для оверлеев
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          window.closeModal(overlay.id);
        }
      });
    });
  });
</script>

<!-- Fallback для старых браузеров -->
<noscript>
  <style>
    #preloader { display: none; }
    .main-content { opacity: 1; }
    .skeleton { background: var(--bg-alt); }
  </style>
  <p style="text-align:center; padding: 2rem; color: var(--text-dim);">
    Для работы сайта требуется JavaScript. Пожалуйста, включите JavaScript в настройках браузера.
  </p>
</noscript>
</body>
</html>
